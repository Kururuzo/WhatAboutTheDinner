2020-05-05 11:11:34,796 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:11:34,845 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6b3e12b5, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5aac4250, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1338fb5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@42463763, org.springframework.test.context.transaction.TransactionalTestExecutionListener@59f63e24, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@61f05988, org.springframework.test.context.event.EventPublishingTestExecutionListener@7ca33c24]
2020-05-05 11:11:36,148 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:11:36,472 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 293ms. Found 5 JPA repository interfaces.
2020-05-05 11:11:37,506 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:11:37,800 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:11:38,224 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:11:39,849 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:11:40,804 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:11:42,164 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:11:42,188 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:11:45,052 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:11:45,240 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:11:45,241 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:11:45,270 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-05 11:11:45,303 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@7d0df326, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-05 11:11:45,402 INFO  r.r.web.controller.RestaurantRestController.delete:66 - delete dish 100013
2020-05-05 11:11:45,506 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@7d0df326, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:11:45,515 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:11:45,516 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:11:45,518 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-05 11:11:45,522 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5b028f58, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-05 11:11:45,525 INFO  r.r.web.controller.RestaurantRestController.getAll:39 - getAll
2020-05-05 11:11:45,784 WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver.doResolveException:235 - Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableException]
java.lang.IllegalStateException: Cannot set error status - response is already committed
	at org.springframework.util.Assert.state(Assert.java:73)
	at org.springframework.mock.web.MockHttpServletResponse.sendError(MockHttpServletResponse.java:541)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.sendServerError(DefaultHandlerExceptionResolver.java:550)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.handleHttpMessageNotWritable(DefaultHandlerExceptionResolver.java:440)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.doResolveException(DefaultHandlerExceptionResolver.java:210)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:141)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1300)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:143)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1111)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at ru.restaurant.web.AbstractControllerTest.perform(AbstractControllerTest.java:48)
	at ru.restaurant.web.controller.RestaurantRestControllerTest.getAll(RestaurantRestControllerTest.java:42)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:212)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:208)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
2020-05-05 11:11:45,794 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5b028f58, testMethod = getAll@RestaurantRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]), mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:11:45,899 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:11:45,901 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:11:45,905 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-05 11:11:45,914 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5036a286, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-05 11:11:46,048 INFO  r.r.web.controller.RestaurantRestController.update:58 - update Restaurant:100013(Updated)
2020-05-05 11:11:46,396 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5036a286, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:11:46,398 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:11:46,399 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:11:46,401 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:11:46,405 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@2681185e, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-05 11:11:46,410 INFO  r.r.web.controller.RestaurantRestController.get:33 - get restaurant with id=100013
2020-05-05 11:11:46,434 WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver.doResolveException:235 - Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableException]
java.lang.IllegalStateException: Cannot set error status - response is already committed
	at org.springframework.util.Assert.state(Assert.java:73)
	at org.springframework.mock.web.MockHttpServletResponse.sendError(MockHttpServletResponse.java:541)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.sendServerError(DefaultHandlerExceptionResolver.java:550)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.handleHttpMessageNotWritable(DefaultHandlerExceptionResolver.java:440)
	at org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.doResolveException(DefaultHandlerExceptionResolver.java:210)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:141)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1300)
	at org.springframework.test.web.servlet.TestDispatcherServlet.processHandlerException(TestDispatcherServlet.java:143)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1111)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:183)
	at ru.restaurant.web.AbstractControllerTest.perform(AbstractControllerTest.java:48)
	at ru.restaurant.web.controller.RestaurantRestControllerTest.get(RestaurantRestControllerTest.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:212)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:208)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
2020-05-05 11:11:46,438 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@2681185e, testMethod = get@RestaurantRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]->org.hibernate.collection.internal.PersistentSet[0]->ru.restaurant.model.Menu["restaurant"]->ru.restaurant.model.Restaurant["menus"]), mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:11:46,507 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:11:46,508 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:11:46,511 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:11:46,515 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@524dd373, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-05 11:11:46,519 INFO  r.r.web.controller.RestaurantRestController.createWithLocation:45 - create dish=Restaurant:null(New)
2020-05-05 11:11:46,558 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@524dd373, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:11:46,574 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:14:53,920 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:14:53,951 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6b3e12b5, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5aac4250, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1338fb5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@42463763, org.springframework.test.context.transaction.TransactionalTestExecutionListener@59f63e24, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@61f05988, org.springframework.test.context.event.EventPublishingTestExecutionListener@7ca33c24]
2020-05-05 11:14:54,772 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:14:54,918 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 125ms. Found 5 JPA repository interfaces.
2020-05-05 11:14:55,499 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:14:55,600 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:14:55,804 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:14:56,604 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:14:57,094 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:14:57,869 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:14:57,881 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:14:59,447 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:14:59,602 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:14:59,603 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:14:59,625 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-05 11:14:59,648 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3703a400, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@58ad0586]; rollback [true]
2020-05-05 11:14:59,728 INFO  r.r.web.controller.RestaurantRestController.delete:66 - delete dish 100013
2020-05-05 11:14:59,820 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3703a400, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:14:59,830 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:14:59,831 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:14:59,835 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-05 11:14:59,840 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@52fec840, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@58ad0586]; rollback [true]
2020-05-05 11:14:59,843 INFO  r.r.web.controller.RestaurantRestController.getAll:39 - getAll
2020-05-05 11:15:00,124 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@52fec840, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:00,127 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:00,128 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:00,132 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-05 11:15:00,136 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@544300a6, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@58ad0586]; rollback [true]
2020-05-05 11:15:00,165 INFO  r.r.web.controller.RestaurantRestController.update:58 - update Restaurant:100013(Updated)
2020-05-05 11:15:00,242 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@544300a6, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:00,243 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:00,244 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:00,246 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:15:00,249 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@448fa659, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@58ad0586]; rollback [true]
2020-05-05 11:15:00,252 INFO  r.r.web.controller.RestaurantRestController.get:33 - get restaurant with id=100013
2020-05-05 11:15:00,268 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@448fa659, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:00,270 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:00,271 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:00,273 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-05 11:15:00,277 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3fc051ce, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@58ad0586]; rollback [true]
2020-05-05 11:15:00,281 INFO  r.r.web.controller.RestaurantRestController.createWithLocation:45 - create dish=Restaurant:null(New)
2020-05-05 11:15:00,308 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1dac0784 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3fc051ce, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@22105c76 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:00,324 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:15:21,102 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:15:21,134 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1338fb5, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42463763, org.springframework.test.context.support.DirtiesContextTestExecutionListener@59f63e24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@61f05988, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ca33c24, org.springframework.test.context.event.EventPublishingTestExecutionListener@fade1fc]
2020-05-05 11:15:22,245 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:15:22,457 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 160ms. Found 5 JPA repository interfaces.
2020-05-05 11:15:23,318 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:15:23,466 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:15:23,675 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:15:24,559 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:15:25,107 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:15:25,826 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:15:25,840 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:15:28,789 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:15:29,010 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:29,011 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:29,048 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 35 ms
2020-05-05 11:15:29,084 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1dac0784, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:29,205 INFO  ru.restaurant.web.controller.MenuRestController.delete:81 - delete menu 100016
2020-05-05 11:15:29,351 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1dac0784, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:29,369 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:29,371 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:29,376 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-05 11:15:29,382 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1d3e5a05, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:29,387 INFO  ru.restaurant.web.controller.MenuRestController.getAll:47 - get all menus
2020-05-05 11:15:29,948 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1d3e5a05, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:29,952 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:29,953 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:29,959 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 5 ms
2020-05-05 11:15:29,964 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7de43652, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:30,003 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:53 - get menus by date 2020-04-01
2020-05-05 11:15:30,038 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7de43652, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:30,041 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:30,042 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:30,046 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-05 11:15:30,052 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4601a148, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:30,088 INFO  ru.restaurant.web.controller.MenuRestController.update:73 - update Menu:100016 with id=100016
2020-05-05 11:15:30,211 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4601a148, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:30,213 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:30,215 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:30,220 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 5 ms
2020-05-05 11:15:30,224 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21b2579d, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:30,228 INFO  ru.restaurant.web.controller.MenuRestController.get:41 - get menu with id=100016
2020-05-05 11:15:30,294 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21b2579d, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:30,304 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:15:30,307 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:15:30,318 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 7 ms
2020-05-05 11:15:30,327 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@15aaf7b1, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:15:30,333 INFO  ru.restaurant.web.controller.MenuRestController.createWithLocation:59 - create Menu:null
2020-05-05 11:15:30,415 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@15aaf7b1, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:15:30,443 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:18:45,752 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:18:45,785 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1338fb5, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42463763, org.springframework.test.context.support.DirtiesContextTestExecutionListener@59f63e24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@61f05988, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ca33c24, org.springframework.test.context.event.EventPublishingTestExecutionListener@fade1fc]
2020-05-05 11:18:46,643 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:18:46,827 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 151ms. Found 5 JPA repository interfaces.
2020-05-05 11:18:47,510 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:18:47,638 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:18:47,831 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:18:48,580 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:18:49,170 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:18:49,864 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:18:49,877 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:18:51,618 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:18:51,764 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:51,765 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:51,787 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-05 11:18:51,809 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2336d3f, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:51,892 INFO  ru.restaurant.web.controller.MenuRestController.delete:81 - delete menu 100016
2020-05-05 11:18:51,995 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2336d3f, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,002 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:52,003 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:52,006 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:18:52,009 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@42d7e8bc, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:52,012 INFO  ru.restaurant.web.controller.MenuRestController.getAll:47 - get all menus
2020-05-05 11:18:52,293 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@42d7e8bc, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,295 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:52,295 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:52,297 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-05 11:18:52,300 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4fe9adfb, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:52,317 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:53 - get menus by date 2020-04-01
2020-05-05 11:18:52,351 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4fe9adfb, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,356 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:52,358 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:52,362 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-05 11:18:52,366 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@38c1b1a7, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:52,390 INFO  ru.restaurant.web.controller.MenuRestController.update:73 - update Menu:100016 with id=100016
2020-05-05 11:18:52,448 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@38c1b1a7, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,450 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:52,451 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:52,453 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:18:52,457 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1a22c1ba, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:52,461 INFO  ru.restaurant.web.controller.MenuRestController.get:41 - get menu with id=100016
2020-05-05 11:18:52,475 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1a22c1ba, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,477 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:18:52,478 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:18:52,480 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:18:52,483 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3bf41cd0, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@45635ae1]; rollback [true]
2020-05-05 11:18:52,486 INFO  ru.restaurant.web.controller.MenuRestController.createWithLocation:59 - create Menu:null
2020-05-05 11:18:52,535 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@22105c76 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3bf41cd0, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7f5ecada testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:18:52,552 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:19:12,333 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:19:12,361 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6d23017e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@54dcfa5a, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1817f1eb, org.springframework.test.context.support.DirtiesContextTestExecutionListener@767e20cf, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3a3e78f, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@301ec38b, org.springframework.test.context.event.EventPublishingTestExecutionListener@17a1e4ca]
2020-05-05 11:19:13,185 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:19:13,334 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 130ms. Found 5 JPA repository interfaces.
2020-05-05 11:19:14,191 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:19:14,296 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:19:14,496 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:19:15,280 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:19:15,780 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:19:16,436 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:19:16,448 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:19:18,186 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:19:18,360 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:19:18,361 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:19:18,379 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 18 ms
2020-05-05 11:19:18,401 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@654cb30c, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5e9f1a4c]; rollback [true]
2020-05-05 11:19:18,609 INFO  ru.restaurant.web.controller.DishRestController.createWithLocation:47 - create dish=Dish{id=null, price=50, name='New}
2020-05-05 11:19:18,791 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@654cb30c, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:19:18,799 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:19:18,799 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:19:18,802 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-05 11:19:18,805 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@779448b8, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5e9f1a4c]; rollback [true]
2020-05-05 11:19:18,816 INFO  ru.restaurant.web.controller.DishRestController.update:60 - update Dish{id=100002, price=75, name='Updated}
2020-05-05 11:19:18,842 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@779448b8, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:19:18,844 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:19:18,844 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:19:18,847 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-05 11:19:18,851 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@43e2b8da, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5e9f1a4c]; rollback [true]
2020-05-05 11:19:18,854 INFO  ru.restaurant.web.controller.DishRestController.delete:68 - delete dish 100002
2020-05-05 11:19:18,890 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@353422fd testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@43e2b8da, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5cc669d testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:19:18,908 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:21:25,059 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-05 11:21:25,089 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-05 11:21:25,912 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-05 11:21:26,084 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 146ms. Found 5 JPA repository interfaces.
2020-05-05 11:21:26,797 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-05 11:21:26,901 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-05 11:21:27,114 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-05 11:21:28,016 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-05 11:21:28,559 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-05 11:21:29,177 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-05 11:21:29,189 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-05 11:21:30,904 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-05 11:21:31,133 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-05 11:21:31,134 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-05 11:21:31,159 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-05 11:21:31,186 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1dac0784, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@564d3940]; rollback [true]
2020-05-05 11:21:31,253 INFO  ru.restaurant.web.controller.MenuRestController.getAll:47 - get all menus
2020-05-05 11:21:31,664 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@12765ebd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1dac0784, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3703a400 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-05 11:21:31,685 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 06:50:15,171 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-08 06:50:15,200 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-08 06:50:15,975 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-08 06:50:16,145 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 149ms. Found 5 JPA repository interfaces.
2020-05-08 06:50:16,957 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-08 06:50:17,149 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-08 06:50:17,460 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-08 06:50:18,408 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-08 06:50:18,952 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-08 06:50:19,863 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-08 06:50:19,875 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 06:50:21,593 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-08 06:50:21,737 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-08 06:50:21,738 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-08 06:50:21,759 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-08 06:50:21,785 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@45e35a0d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21d15932, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3966c679 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@17fb5184]; rollback [true]
2020-05-08 06:50:21,856 INFO  ru.restaurant.web.controller.MenuRestController.getAll:47 - get all menus
2020-05-08 06:50:22,237 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@45e35a0d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21d15932, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3966c679 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-08 06:50:22,261 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:16:14,147 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-08 07:16:14,177 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-08 07:16:15,154 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-08 07:16:15,326 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 146ms. Found 5 JPA repository interfaces.
2020-05-08 07:16:16,192 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-08 07:16:16,332 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-08 07:16:16,607 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-08 07:16:17,391 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-08 07:16:17,855 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-08 07:16:18,576 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-08 07:16:18,592 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:16:20,264 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-08 07:16:20,410 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-08 07:16:20,412 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-08 07:16:20,431 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-08 07:16:20,456 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@45e35a0d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21d15932, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3966c679 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@17fb5184]; rollback [true]
2020-05-08 07:16:20,556 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:53 - get menus by date 2020-04-01
2020-05-08 07:16:20,933 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@45e35a0d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21d15932, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3966c679 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-08 07:16:20,952 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:51:19,310 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-08 07:51:19,342 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-08 07:51:20,275 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-08 07:51:20,473 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 162ms. Found 5 JPA repository interfaces.
2020-05-08 07:51:21,167 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-08 07:51:21,314 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-08 07:51:21,578 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-08 07:51:22,437 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-08 07:51:22,996 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-08 07:51:23,725 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-08 07:51:23,737 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:51:25,188 WARN  o.s.w.context.support.GenericWebApplicationContext.refresh:558 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'menuRestController' method 
ru.restaurant.web.controller.MenuRestController#getByDate(LocalDate)
to {GET /rest/menus, params [date], produces [application/json]}: There is already 'menuRestController' bean method
ru.restaurant.web.controller.MenuRestController#getOfferByDate(LocalDate) mapped.
2020-05-08 07:51:25,190 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:51:25,196 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b] to prepare test instance [ru.restaurant.web.controller.MenuRestControllerTest@2fcffc05]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'menuRestController' method 
ru.restaurant.web.controller.MenuRestController#getByDate(LocalDate)
to {GET /rest/menus, params [date], produces [application/json]}: There is already 'menuRestController' bean method
ru.restaurant.web.controller.MenuRestController#getOfferByDate(LocalDate) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:882)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:129)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'menuRestController' method 
ru.restaurant.web.controller.MenuRestController#getByDate(LocalDate)
to {GET /rest/menus, params [date], produces [application/json]}: There is already 'menuRestController' bean method
ru.restaurant.web.controller.MenuRestController#getOfferByDate(LocalDate) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:633)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:600)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:318)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:379)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:78)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$1(AbstractHandlerMethodMapping.java:288)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:286)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:258)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:217)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:205)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:190)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	... 78 common frames omitted
2020-05-08 07:54:41,920 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-08 07:54:41,948 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-08 07:54:42,751 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-08 07:54:42,915 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 136ms. Found 5 JPA repository interfaces.
2020-05-08 07:54:43,576 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-08 07:54:43,687 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-08 07:54:43,928 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-08 07:54:44,782 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-08 07:54:45,345 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-08 07:54:46,042 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-08 07:54:46,054 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-08 07:54:47,685 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-08 07:54:47,841 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-08 07:54:47,842 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-08 07:54:47,865 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-08 07:54:47,890 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@750457a5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6c4786af, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@65c689e7 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@39403943]; rollback [true]
2020-05-08 07:54:47,980 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:53 - get menus by date 2020-04-01
2020-05-08 07:54:48,306 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@750457a5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6c4786af, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@65c689e7 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-08 07:54:48,330 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:43:17,301 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-09 07:43:17,332 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-09 07:43:18,113 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-09 07:43:18,295 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 161ms. Found 5 JPA repository interfaces.
2020-05-09 07:43:19,118 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-09 07:43:19,309 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-09 07:43:19,643 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-09 07:43:20,754 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-09 07:43:21,359 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-09 07:43:22,309 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-09 07:43:22,323 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:43:24,143 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-09 07:43:24,291 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-09 07:43:24,292 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-09 07:43:24,313 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-09 07:43:24,336 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@750457a5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6c4786af, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@65c689e7 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@39403943]; rollback [true]
2020-05-09 07:43:24,454 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-09 07:43:24,519 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@750457a5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6c4786af, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [dishes] on this ManagedType [ru.restaurant.model.AbstractBaseEntity]; nested exception is java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [dishes] on this ManagedType [ru.restaurant.model.AbstractBaseEntity], mergedContextConfiguration = [WebMergedContextConfiguration@65c689e7 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-09 07:43:24,552 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:45:42,462 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-09 07:45:42,491 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-09 07:45:43,313 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-09 07:45:43,471 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-09 07:45:44,182 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-09 07:45:44,348 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-09 07:45:44,547 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-09 07:45:45,365 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-09 07:45:45,908 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-09 07:45:46,610 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-09 07:45:46,622 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:45:48,255 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-09 07:45:48,381 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-09 07:45:48,382 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-09 07:45:48,400 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-09 07:45:48,422 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@da67c46 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5c7e55a4, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7ae6927 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@66d61298]; rollback [true]
2020-05-09 07:45:48,498 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-09 07:45:48,880 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@da67c46 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5c7e55a4, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[Menu:100016,
    Menu:100017,
    Menu:100018,
    Menu:100019,
    Menu:100020,
    Menu:100021,
    Menu:100022,
    Menu:100023,
    Menu:100024]>
to be equal to:
 <[Menu:100024,
    Menu:100023,
    Menu:100022,
    Menu:100021,
    Menu:100020,
    Menu:100019,
    Menu:100018,
    Menu:100017,
    Menu:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@7ae6927 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-09 07:45:48,905 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:46:51,870 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-09 07:46:51,900 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-09 07:46:52,693 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-09 07:46:52,853 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-09 07:46:53,456 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-09 07:46:53,599 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-09 07:46:53,794 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-09 07:46:54,551 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-09 07:46:55,012 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-09 07:46:55,631 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-09 07:46:55,643 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 07:46:57,498 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-09 07:46:57,629 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-09 07:46:57,629 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-09 07:46:57,653 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-09 07:46:57,679 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1999e1f5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@b1fa523, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@77307b51 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6fe9c048]; rollback [true]
2020-05-09 07:46:57,765 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-09 07:46:57,819 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1999e1f5 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@b1fa523, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Unable to locate Attribute  with the the given name [restaurants] on this ManagedType [ru.restaurant.model.AbstractBaseEntity]; nested exception is java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [restaurants] on this ManagedType [ru.restaurant.model.AbstractBaseEntity], mergedContextConfiguration = [WebMergedContextConfiguration@77307b51 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-09 07:46:57,856 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 08:15:38,629 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-09 08:15:38,650 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-09 08:15:39,374 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-09 08:15:39,547 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 150ms. Found 5 JPA repository interfaces.
2020-05-09 08:15:40,183 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-09 08:15:40,317 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-09 08:15:40,540 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-09 08:15:41,400 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-09 08:15:41,943 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-09 08:15:42,783 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-09 08:15:42,802 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 08:15:44,553 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-09 08:15:44,714 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-09 08:15:44,715 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-09 08:15:44,737 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-09 08:15:44,761 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56e78538]; rollback [true]
2020-05-09 08:15:44,870 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-09 08:15:44,927 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Named parameter not bound : dateParam; nested exception is org.hibernate.QueryException: Named parameter not bound : dateParam, mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-09 08:15:44,956 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 08:17:20,258 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-09 08:17:20,284 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-09 08:17:21,123 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-09 08:17:21,319 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 168ms. Found 5 JPA repository interfaces.
2020-05-09 08:17:21,960 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-09 08:17:22,079 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-09 08:17:22,302 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-09 08:17:23,049 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-09 08:17:23,515 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-09 08:17:24,218 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-09 08:17:24,231 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-09 08:17:25,919 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-09 08:17:26,071 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-09 08:17:26,072 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-09 08:17:26,094 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-09 08:17:26,117 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-09 08:17:26,194 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-09 08:17:26,524 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[Menu:100016,
    Menu:100017,
    Menu:100018,
    Menu:100019,
    Menu:100020,
    Menu:100021,
    Menu:100022,
    Menu:100023,
    Menu:100024]>
to be equal to:
 <[Menu:100024,
    Menu:100023,
    Menu:100022,
    Menu:100021,
    Menu:100020,
    Menu:100019,
    Menu:100018,
    Menu:100017,
    Menu:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-09 08:17:26,552 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 12:33:35,874 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 12:33:35,899 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 12:33:36,701 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 12:33:36,864 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 143ms. Found 5 JPA repository interfaces.
2020-05-10 12:33:37,683 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 12:33:37,835 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 12:33:38,095 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 12:33:39,025 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 12:33:39,561 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 12:33:40,444 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 12:33:40,457 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 12:33:42,169 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 12:33:42,314 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 12:33:42,315 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 12:33:42,345 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 30 ms
2020-05-10 12:33:42,369 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-10 12:33:42,467 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:60 - get offer by date 2020-04-01
2020-05-10 12:33:42,850 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[Menu:100016,
    Menu:100017,
    Menu:100018,
    Menu:100019,
    Menu:100020,
    Menu:100021,
    Menu:100022,
    Menu:100023,
    Menu:100024]>
to be equal to:
 <[Menu:100024,
    Menu:100023,
    Menu:100022,
    Menu:100021,
    Menu:100020,
    Menu:100019,
    Menu:100018,
    Menu:100017,
    Menu:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 12:33:42,875 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:13:43,343 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:13:43,373 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 14:13:44,279 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:13:44,444 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-10 14:13:45,038 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:13:45,137 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:13:45,324 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:13:46,218 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:13:46,698 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:13:47,372 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:13:47,388 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:13:49,104 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 14:13:49,257 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 14:13:49,258 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 14:13:49,279 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 14:13:49,300 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-10 14:13:49,392 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:53 - get menus by date 2020-04-01
2020-05-10 14:13:49,738 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 14:13:49,759 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:14:32,999 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:14:33,038 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:14:33,631 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:14:33,864 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 208ms. Found 5 JPA repository interfaces.
2020-05-10 14:14:34,471 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:14:34,605 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:14:34,792 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:14:35,618 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:14:36,089 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:14:36,763 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:14:36,775 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:14:38,166 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:15:45,249 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:15:45,281 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:15:45,895 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:15:46,117 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 196ms. Found 5 JPA repository interfaces.
2020-05-10 14:15:46,675 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:15:46,776 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:15:46,978 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:15:47,755 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:15:48,239 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:15:48,824 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:15:48,837 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:15:50,180 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:16:32,121 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:16:32,150 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:16:32,753 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:16:32,962 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 182ms. Found 5 JPA repository interfaces.
2020-05-10 14:16:33,392 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:16:33,553 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:16:33,789 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:16:34,543 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:16:35,043 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:16:35,771 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:16:35,788 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:16:37,169 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:17:55,484 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:17:55,515 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:17:56,152 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:17:56,358 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 180ms. Found 5 JPA repository interfaces.
2020-05-10 14:17:56,794 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:17:56,902 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:17:57,127 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:17:57,973 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:17:58,427 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:17:59,064 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:17:59,077 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:18:00,472 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:18:20,803 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:18:20,912 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:18:21,788 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:18:22,063 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 236ms. Found 5 JPA repository interfaces.
2020-05-10 14:18:22,503 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:18:22,607 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:18:22,855 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:18:23,681 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:18:24,164 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:18:24,909 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:18:24,922 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:18:26,292 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:18:51,005 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 14:18:51,035 INFO  o.s.t.c.support.DefaultTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@42721fe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@40844aab, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f6c9cd8, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5b619d14, org.springframework.test.context.transaction.TransactionalTestExecutionListener@66746f57, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@447a020, org.springframework.test.context.event.EventPublishingTestExecutionListener@7f36662c]
2020-05-10 14:18:51,591 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 14:18:51,773 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 164ms. Found 5 JPA repository interfaces.
2020-05-10 14:18:52,250 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 14:18:52,407 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 14:18:52,608 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 14:18:53,407 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 14:18:54,019 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 14:18:54,619 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 14:18:54,630 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 14:18:55,937 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 15:44:49,968 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 15:44:49,992 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6b3e12b5, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5aac4250, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1338fb5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@42463763, org.springframework.test.context.transaction.TransactionalTestExecutionListener@59f63e24, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@61f05988, org.springframework.test.context.event.EventPublishingTestExecutionListener@7ca33c24]
2020-05-10 15:44:50,878 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 15:44:51,058 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 149ms. Found 5 JPA repository interfaces.
2020-05-10 15:44:51,684 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 15:44:51,785 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 15:44:51,976 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 15:44:52,728 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 15:44:53,303 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 15:44:54,143 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 15:44:54,155 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 15:44:55,816 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 15:44:55,963 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 15:44:55,963 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 15:44:55,984 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-10 15:44:56,011 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1cca2e9d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77d3c3d7, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4cefa0be testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@52ccf197]; rollback [true]
2020-05-10 15:44:56,111 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 15:44:56,435 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1cca2e9d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77d3c3d7, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurant":{"id":100013,"name":"Lucky Pizza","menus":null,"votes":null},"dishes":[null,null,null]},{"date":"2020-04-01","restaurant":{"id":100015,"name":"Green Garden","menus":null,"votes":null},"dishes":[null,null,null]},{"date":"2020-04-01","restaurant":{"id":100014,"name":"Steak House","menus":null,"votes":null},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@4cefa0be testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 15:44:56,469 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 15:54:12,281 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 15:54:12,308 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 15:54:13,121 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 15:54:13,280 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 132ms. Found 5 JPA repository interfaces.
2020-05-10 15:54:13,902 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 15:54:14,000 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 15:54:14,226 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 15:54:15,004 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 15:54:15,532 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 15:54:16,359 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 15:54:16,372 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 15:54:18,067 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 15:54:18,226 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 15:54:18,227 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 15:54:18,251 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-10 15:54:18,281 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@77d3c3d7 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4cefa0be, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a3be84 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2b06681c]; rollback [true]
2020-05-10 15:54:18,382 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 15:54:18,725 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@77d3c3d7 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4cefa0be, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurantTo":{"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@5a3be84 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 15:54:18,756 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:02:29,445 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:02:29,479 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:02:30,427 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:02:30,618 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 163ms. Found 5 JPA repository interfaces.
2020-05-10 16:02:31,314 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:02:31,413 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:02:31,623 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:02:32,416 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:02:33,037 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:02:33,809 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:02:33,823 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:02:35,666 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:02:35,806 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:02:35,807 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:02:35,832 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-10 16:02:35,855 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@b1fa523 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77307b51, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@48d464cf testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54d46c8]; rollback [true]
2020-05-10 16:02:35,933 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:02:36,198 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@b1fa523 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77307b51, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurantTo":{"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@48d464cf testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:02:36,234 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:03:01,641 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:03:01,697 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:03:02,569 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:03:02,722 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 129ms. Found 5 JPA repository interfaces.
2020-05-10 16:03:03,705 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:03:03,806 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:03:04,003 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:03:04,776 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:03:05,353 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:03:06,063 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:03:06,075 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:03:07,796 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:03:07,945 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:03:07,946 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:03:07,970 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-10 16:03:07,995 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-10 16:03:08,089 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:03:08,262 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class ru.restaurant.to.RestaurantTo]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class ru.restaurant.to.RestaurantTo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.ArrayList[0]->ru.restaurant.to.MenuTo["restaurantTo"]), mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:03:08,300 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:04:55,821 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:04:55,871 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:04:56,700 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:04:56,857 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 139ms. Found 5 JPA repository interfaces.
2020-05-10 16:04:57,671 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:04:57,791 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:04:57,983 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:04:58,893 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:04:59,375 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:05:00,108 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:05:00,124 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:05:01,932 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:05:02,099 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:05:02,099 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:05:02,130 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 30 ms
2020-05-10 16:05:02,158 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@20f6b6e0]; rollback [true]
2020-05-10 16:05:02,245 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:05:02,546 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurantTo":{"id":100013,"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100015,"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100014,"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:05:02,582 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:23:44,214 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:23:44,243 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:23:45,102 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:23:45,250 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 126ms. Found 5 JPA repository interfaces.
2020-05-10 16:23:45,964 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:23:46,067 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:23:46,289 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:23:47,085 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:23:47,605 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:23:48,249 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:23:48,261 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:23:49,900 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:23:50,049 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:23:50,049 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:23:50,070 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-10 16:23:50,091 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@b1fa523 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77307b51, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@48d464cf testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54d46c8]; rollback [true]
2020-05-10 16:23:50,173 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:23:50,436 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@b1fa523 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@77307b51, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurantTo":{"id":100013,"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100015,"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100014,"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@48d464cf testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:23:50,476 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:24:44,246 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:24:44,280 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:24:45,093 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:24:45,240 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 129ms. Found 5 JPA repository interfaces.
2020-05-10 16:24:46,052 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:24:46,166 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:24:46,409 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:24:47,193 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:24:47,664 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:24:48,354 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:24:48,367 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:24:50,028 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:24:50,165 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:24:50,165 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:24:50,183 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-10 16:24:50,203 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-10 16:24:50,298 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:24:50,606 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurantTo":{"id":100013,"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100015,"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurantTo":{"id":100014,"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:24:50,636 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:42:29,953 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:42:29,983 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:42:30,874 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:42:31,054 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 152ms. Found 5 JPA repository interfaces.
2020-05-10 16:42:31,669 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:42:31,798 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:42:32,039 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:42:32,783 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:42:33,317 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:42:34,004 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:42:34,016 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:42:35,635 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:42:35,773 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:42:35,774 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:42:35,794 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-10 16:42:35,819 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c7cf8c4]; rollback [true]
2020-05-10 16:42:35,901 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:42:36,211 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7ae6927 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7d0df326, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurant":{"id":100013,"name":"Lucky Pizza"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurant":{"id":100015,"name":"Green Garden"},"dishes":[null,null,null]},{"date":"2020-04-01","restaurant":{"id":100014,"name":"Steak House"},"dishes":[null,null,null]}]', mergedContextConfiguration = [WebMergedContextConfiguration@43f7f48d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:42:36,242 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:48:10,243 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:48:10,271 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:48:11,122 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:48:11,305 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 155ms. Found 5 JPA repository interfaces.
2020-05-10 16:48:12,461 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:48:12,602 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:48:12,818 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:48:13,808 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:48:14,289 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:48:14,932 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:48:14,944 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:48:16,633 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:48:16,774 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:48:16,774 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:48:16,796 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 16:48:16,818 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56e78538]; rollback [true]
2020-05-10 16:48:16,901 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:48:16,949 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Named parameter not bound : dateParam; nested exception is org.hibernate.QueryException: Named parameter not bound : dateParam, mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:48:16,983 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:49:19,897 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:49:19,932 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:49:20,764 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:49:20,914 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 126ms. Found 5 JPA repository interfaces.
2020-05-10 16:49:21,537 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:49:21,680 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:49:21,875 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:49:22,669 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:49:23,220 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:49:23,941 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:49:23,955 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:49:25,563 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:49:25,702 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:49:25,702 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:49:25,720 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-10 16:49:25,741 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56e78538]; rollback [true]
2020-05-10 16:49:25,827 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 16:49:26,120 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@7d0df326 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43f7f48d, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"date":"2020-04-01","restaurant":{"id":100013,"name":"Lucky Pizza"},"dishes":[{"id":100002,"name":"Meat Soup","price":50},{"id":100004,"name":"Salad with meat","price":50},{"id":100012,"name":"Tee","price":10}]},{"date":"2020-04-01","restaurant":{"id":100015,"name":"Green Garden"},"dishes":[{"id":100006,"name":"Caesar","price":50},{"id":100007,"name":"BeefSteak","price":150},{"id":100010,"name":"Juice","price":20}]},{"date":"2020-04-01","restaurant":{"id":100014,"name":"Steak House"},"dishes":[{"id":100003,"name":"Chicken Soup","price":40},{"id":100005,"name":"Vegetable salad","price":40},{"id":100011,"name":"Coffee","price":15}]}]', mergedContextConfiguration = [WebMergedContextConfiguration@6d0a4a22 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:49:26,152 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:52:30,294 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 16:52:30,323 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 16:52:31,253 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 16:52:31,426 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 139ms. Found 5 JPA repository interfaces.
2020-05-10 16:52:31,997 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 16:52:32,095 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 16:52:32,283 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 16:52:33,099 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 16:52:33,591 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 16:52:34,265 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 16:52:34,277 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 16:52:35,904 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 16:52:36,042 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 16:52:36,043 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 16:52:36,061 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-10 16:52:36,081 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8e00c02 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@464d60fb, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@447543ee testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54530644]; rollback [true]
2020-05-10 16:52:36,173 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-05-01
2020-05-10 16:52:36,243 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8e00c02 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@464d60fb, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.restaurant.util.Exception.NotFoundException: Menus for this date not found., mergedContextConfiguration = [WebMergedContextConfiguration@447543ee testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 16:52:36,279 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:53:46,519 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 20:53:46,559 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 20:53:47,470 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 20:53:47,608 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 120ms. Found 5 JPA repository interfaces.
2020-05-10 20:53:48,326 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 20:53:48,450 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 20:53:48,640 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 20:53:49,397 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 20:53:49,859 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 20:53:50,523 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 20:53:50,536 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:53:52,295 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 20:53:52,450 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 20:53:52,451 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 20:53:52,471 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-10 20:53:52,499 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@20f6b6e0]; rollback [true]
2020-05-10 20:53:52,599 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 20:53:52,986 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo:null, MenuTo:null, MenuTo:null]>
to be equal to:
 <[MenuTo:100024,
    MenuTo:100023,
    MenuTo:100022,
    MenuTo:100021,
    MenuTo:100020,
    MenuTo:100019,
    MenuTo:100018,
    MenuTo:100017,
    MenuTo:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 20:53:53,016 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:56:02,288 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 20:56:02,330 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-10 20:56:03,141 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 20:56:03,305 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 147ms. Found 5 JPA repository interfaces.
2020-05-10 20:56:04,032 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 20:56:04,143 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 20:56:04,365 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 20:56:05,224 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 20:56:05,819 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 20:56:06,507 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 20:56:06,521 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:56:08,555 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 20:56:08,739 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 20:56:08,740 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 20:56:08,774 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 33 ms
2020-05-10 20:56:08,807 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@5671078e testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3fd21272, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b4bc73d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ad6aeb8]; rollback [true]
2020-05-10 20:56:08,927 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 20:57:42,715 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@5671078e testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3fd21272, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo:null, MenuTo:null, MenuTo:null]>
to be equal to:
 <[MenuTo:100024,
    MenuTo:100023,
    MenuTo:100022,
    MenuTo:100021,
    MenuTo:100020,
    MenuTo:100019,
    MenuTo:100018,
    MenuTo:100017,
    MenuTo:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4b4bc73d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 20:57:42,751 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:57:56,116 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 20:57:56,154 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@320de594, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3dd1dc90, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@478ee483, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1a7288a3, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2974f221, org.springframework.test.context.event.EventPublishingTestExecutionListener@58fe0499]
2020-05-10 20:57:56,915 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 20:57:57,077 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 143ms. Found 5 JPA repository interfaces.
2020-05-10 20:57:57,659 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 20:57:57,775 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 20:57:58,057 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 20:57:58,940 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 20:57:59,511 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 20:58:00,379 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 20:58:00,398 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 20:58:02,525 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 20:58:02,688 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 20:58:02,689 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 20:58:02,712 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 20:58:02,739 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1f6ba47b testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1bb78ae, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3ee2d546 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@430db481]; rollback [true]
2020-05-10 20:58:02,861 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:05:59,679 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1f6ba47b testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1bb78ae, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo:null, MenuTo:null, MenuTo:null]>
to be equal to:
 <[MenuTo:100024,
    MenuTo:100023,
    MenuTo:100022,
    MenuTo:100021,
    MenuTo:100020,
    MenuTo:100019,
    MenuTo:100018,
    MenuTo:100017,
    MenuTo:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3ee2d546 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:05:59,712 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:06:33,375 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:06:33,402 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:06:34,357 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:06:34,546 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 162ms. Found 5 JPA repository interfaces.
2020-05-10 21:06:35,408 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:06:35,509 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:06:35,708 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:06:36,523 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:06:37,054 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:06:37,749 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:06:37,761 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:06:39,384 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:06:39,539 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:06:39,540 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:06:39,562 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 21:06:39,589 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43f7f48d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6d0a4a22, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1999e1f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@731fae]; rollback [true]
2020-05-10 21:06:39,680 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:06:40,043 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43f7f48d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6d0a4a22, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo:null, MenuTo:null, MenuTo:null]>
to be equal to:
 <[MenuTo:100024,
    MenuTo:100023,
    MenuTo:100022,
    MenuTo:100021,
    MenuTo:100020,
    MenuTo:100019,
    MenuTo:100018,
    MenuTo:100017,
    MenuTo:100016]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@1999e1f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:06:40,070 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:18:29,240 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:18:29,285 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:18:30,193 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:18:30,377 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 150ms. Found 5 JPA repository interfaces.
2020-05-10 21:18:31,223 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:18:31,323 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:18:31,526 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:18:32,333 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:18:32,909 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:18:33,586 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:18:33,598 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:18:35,540 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:18:35,690 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:18:35,691 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:18:35,716 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-10 21:18:35,747 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@21f479cd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@102fd71d, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@8e00c02 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ae6451d]; rollback [true]
2020-05-10 21:18:35,860 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:18:36,292 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@21f479cd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@102fd71d, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo:null, MenuTo:null, MenuTo:null] (ArrayList@2e5c7cd5)">
to be equal to:
 <"[MenuTo:null, MenuTo:null, MenuTo:null] (ListN@f252762)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@8e00c02 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:18:36,336 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:22:40,908 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:22:40,939 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:22:41,791 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:22:41,995 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 176ms. Found 5 JPA repository interfaces.
2020-05-10 21:22:42,713 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:22:42,818 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:22:43,015 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:22:43,770 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:22:44,270 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:22:44,925 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:22:44,945 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:22:46,627 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:22:46,777 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:22:46,778 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:22:46,801 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-10 21:22:46,830 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4850d66b testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21f479cd, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@102fd71d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@52b891de]; rollback [true]
2020-05-10 21:22:46,934 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:22:47,290 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@4850d66b testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@21f479cd, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]}]>
to be equal to:
 <[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@102fd71d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:22:47,325 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:30:12,413 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:30:12,441 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:30:13,258 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:30:13,437 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 153ms. Found 5 JPA repository interfaces.
2020-05-10 21:30:14,083 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:30:14,238 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:30:14,454 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:30:15,316 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:30:15,963 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:30:16,680 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:30:16,691 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:30:18,388 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:30:18,560 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:30:18,561 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:30:18,584 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-10 21:30:18,614 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@21f479cd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@102fd71d, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@8e00c02 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4ae6451d]; rollback [true]
2020-05-10 21:30:18,713 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:30:19,086 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@21f479cd testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@102fd71d, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@237c8718)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@325e03b)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@8e00c02 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:30:19,115 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:38:01,442 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:38:01,478 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:38:02,305 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:38:02,477 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 146ms. Found 5 JPA repository interfaces.
2020-05-10 21:38:03,199 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:38:03,315 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:38:03,513 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:38:04,338 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:38:04,955 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:38:05,632 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:38:05,645 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:38:07,311 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:38:07,458 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:38:07,458 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:38:07,480 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 21:38:07,507 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@20f6b6e0]; rollback [true]
2020-05-10 21:38:07,618 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:38:08,039 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@4cefa0be testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a3be84, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@7fcfe065)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@7d2baa56)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4850d66b testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:38:08,064 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:39:40,882 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:39:40,931 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-10 21:39:41,806 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:39:41,965 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 139ms. Found 5 JPA repository interfaces.
2020-05-10 21:39:42,546 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:39:42,655 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:39:42,891 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:39:43,775 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:39:44,370 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:39:45,129 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:39:45,143 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:39:47,171 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:39:47,325 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:39:47,326 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:39:47,352 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 26 ms
2020-05-10 21:39:47,379 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@5671078e testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3fd21272, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4b4bc73d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ad6aeb8]; rollback [true]
2020-05-10 21:39:47,495 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:41:12,253 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@5671078e testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3fd21272, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@74ab8610)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@231c521e)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4b4bc73d testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:41:12,293 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:41:30,077 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:41:30,111 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:41:31,108 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:41:31,257 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 126ms. Found 5 JPA repository interfaces.
2020-05-10 21:41:32,036 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:41:32,160 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:41:32,354 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:41:33,111 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:41:33,607 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:41:34,272 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:41:34,288 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:41:35,948 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:41:36,082 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:41:36,083 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:41:36,100 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-10 21:41:36,120 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 21:41:36,206 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:41:36,619 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@7267006e)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@745c8a04)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:41:36,655 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:44:36,322 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:44:36,353 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:44:37,182 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:44:37,337 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 130ms. Found 5 JPA repository interfaces.
2020-05-10 21:44:38,084 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:44:38,211 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:44:38,404 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:44:39,230 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:44:39,728 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:44:40,418 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:44:40,431 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:44:42,028 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:44:42,180 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:44:42,181 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:44:42,205 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 21:44:42,230 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@5a3be84 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4850d66b, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@21f479cd testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@67cd84f9]; rollback [true]
2020-05-10 21:44:42,316 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:44:42,761 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@5a3be84 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4850d66b, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@7d2baa56)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@6b4a2887)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@21f479cd testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:44:42,797 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:51:12,704 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:51:12,739 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 21:51:13,573 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:51:13,724 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 132ms. Found 5 JPA repository interfaces.
2020-05-10 21:51:14,564 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:51:14,662 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:51:14,850 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:51:15,668 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:51:16,226 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:51:16,891 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:51:16,912 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:51:18,611 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:51:18,773 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:51:18,774 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:51:18,797 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 21:51:18,822 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 21:51:18,927 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:51:19,300 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@7267006e)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@745c8a04)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 21:51:19,329 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:52:17,957 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:52:17,988 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-10 21:52:18,827 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:52:18,979 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-10 21:52:19,623 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:52:19,793 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:52:20,056 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:52:20,919 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:52:21,641 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:52:22,322 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:52:22,337 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:52:24,237 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:52:24,394 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:52:24,394 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:52:24,420 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 25 ms
2020-05-10 21:52:24,450 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@42257df7 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7b11ff9a, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3bd79444 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6130a6f5]; rollback [true]
2020-05-10 21:52:24,542 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 21:53:48,963 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:54:35,304 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 21:54:35,346 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-10 21:54:36,211 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 21:54:36,362 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-10 21:54:36,993 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 21:54:37,154 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 21:54:37,370 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 21:54:38,252 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 21:54:38,828 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 21:54:39,561 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 21:54:39,577 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 21:54:41,512 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 21:54:41,706 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 21:54:41,707 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 21:54:41,739 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 31 ms
2020-05-10 21:54:41,769 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75d95b67 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@40f15786, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@72ea6fcb testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@65cc3902]; rollback [true]
2020-05-10 21:54:41,873 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:13:00,057 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:13:10,398 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:13:10,422 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:13:11,284 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:13:11,442 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-10 22:13:12,055 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:13:12,156 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:13:12,408 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:13:13,212 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:13:13,838 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:13:14,544 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:13:14,555 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:13:16,284 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:13:16,426 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:13:16,426 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:13:16,447 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-10 22:13:16,471 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 22:13:16,571 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:13:16,871 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"date":"2020-04-01","restaurant":{"id":100013,"name":"Lucky Pizza"},"dishes":[{"id":100002,"name":"Meat Soup","price":50},{"id":100004,"name":"Salad with meat","price":50},{"id":100012,"name":"Tee","price":10}]},{"date":"2020-04-01","restaurant":{"id":100014,"name":"Steak House"},"dishes":[{"id":100003,"name":"Chicken Soup","price":40},{"id":100005,"name":"Vegetable salad","price":40},{"id":100011,"name":"Coffee","price":15}]},{"date":"2020-04-01","restaurant":{"id":100015,"name":"Green Garden"},"dishes":[{"id":100006,"name":"Caesar","price":50},{"id":100007,"name":"BeefSteak","price":150},{"id":100010,"name":"Juice","price":20}]}]', mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:13:16,901 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:13:59,207 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:13:59,244 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:14:00,245 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:14:00,433 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 162ms. Found 5 JPA repository interfaces.
2020-05-10 22:14:01,170 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:14:01,287 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:14:01,491 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:14:02,317 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:14:02,836 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:14:03,567 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:14:03,580 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:14:05,338 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:14:05,495 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:14:05,496 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:14:05,519 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 22:14:05,544 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 22:14:05,638 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:14:06,010 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}]>
to be equal to:
 <[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]}]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:14:06,039 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:15:59,805 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:15:59,831 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:16:00,784 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:16:00,950 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 146ms. Found 5 JPA repository interfaces.
2020-05-10 22:16:01,563 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:16:01,663 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:16:01,863 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:16:02,666 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:16:03,352 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:16:04,035 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:16:04,046 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:16:05,781 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:16:05,915 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:16:05,916 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:16:05,933 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 17 ms
2020-05-10 22:16:05,956 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 22:16:06,046 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:16:06,454 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ArrayList@7267006e)">
to be equal to:
 <"[MenuTo{date=2020-04-01, restaurant=RestaurantTo:100013(Lucky Pizza), dishes=[Dish{id=100002, price=50, name='Meat Soup}, Dish{id=100004, price=50, name='Salad with meat}, Dish{id=100012, price=10, name='Tee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100014(Steak House), dishes=[Dish{id=100003, price=40, name='Chicken Soup}, Dish{id=100005, price=40, name='Vegetable salad}, Dish{id=100011, price=15, name='Coffee}]},
    MenuTo{date=2020-04-01, restaurant=RestaurantTo:100015(Green Garden), dishes=[Dish{id=100006, price=50, name='Caesar}, Dish{id=100007, price=150, name='BeefSteak}, Dish{id=100010, price=20, name='Juice}]}] (ListN@745c8a04)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:16:06,486 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:18:37,853 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:18:37,889 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-10 22:18:38,651 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:18:38,805 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 136ms. Found 5 JPA repository interfaces.
2020-05-10 22:18:39,578 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:18:39,713 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:18:39,979 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:18:40,852 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:18:41,496 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:18:42,269 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:18:42,283 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:18:44,304 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:18:44,456 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:18:44,456 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:18:44,481 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-10 22:18:44,510 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4b4bc73d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4cb91fa4, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@12aa2cca testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7772ec28]; rollback [true]
2020-05-10 22:18:44,608 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:24:16,458 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:24:28,686 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:24:28,719 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:24:29,565 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:24:29,717 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-10 22:24:30,315 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:24:30,413 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:24:30,621 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:24:31,540 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:24:32,030 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:24:32,910 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:24:32,922 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:24:34,492 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:24:34,647 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:24:34,648 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:24:34,669 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 22:24:34,693 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 22:24:34,826 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:24:35,242 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:24:35,263 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:25:07,672 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:25:07,709 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:25:08,619 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:25:08,793 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 148ms. Found 5 JPA repository interfaces.
2020-05-10 22:25:09,495 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:25:09,652 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:25:09,863 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:25:10,624 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:25:11,153 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:25:11,849 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:25:11,861 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:25:13,531 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:25:13,682 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:25:13,683 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:25:13,704 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 22:25:13,727 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@438a2d3]; rollback [true]
2020-05-10 22:25:13,833 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-10 22:25:14,209 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d0a4a22 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1999e1f5, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@b1fa523 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:25:14,231 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:27:00,568 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:27:00,595 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:27:01,402 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:27:01,582 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 151ms. Found 5 JPA repository interfaces.
2020-05-10 22:27:02,388 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:27:02,499 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:27:02,691 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:27:03,594 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:27:04,106 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:27:04,878 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:27:04,891 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:27:06,636 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:27:06,778 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:27:06,779 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:27:06,799 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 18 ms
2020-05-10 22:27:06,823 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@4850d66b testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@21f479cd, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@102fd71d testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@52b891de]; rollback [true]
2020-05-10 22:27:06,921 INFO  ru.restaurant.web.controller.VoteRestController.getByDate:48 - get votes by date 2020-04-01
2020-05-10 22:27:07,297 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@4850d66b testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@21f479cd, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@102fd71d testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:27:07,322 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:28:01,357 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:28:01,383 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:28:02,190 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:28:02,364 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 148ms. Found 5 JPA repository interfaces.
2020-05-10 22:28:03,037 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:28:03,135 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:28:03,330 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:28:04,119 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:28:04,573 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:28:05,396 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:28:05,409 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:28:07,143 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:28:07,282 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:28:07,282 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:28:07,303 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-10 22:28:07,328 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@fe38c0e testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6167c42f, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@2cbc2db2 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@64b8eb96]; rollback [true]
2020-05-10 22:28:07,415 INFO  ru.restaurant.web.controller.VoteRestController.getByDate:48 - get votes by date 2020-04-01
2020-05-10 22:28:07,802 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@fe38c0e testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6167c42f, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@2cbc2db2 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:28:07,829 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:58:57,541 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 22:58:57,584 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 22:58:58,470 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 22:58:58,634 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 127ms. Found 5 JPA repository interfaces.
2020-05-10 22:58:59,381 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 22:58:59,480 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 22:58:59,686 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 22:59:00,600 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 22:59:01,404 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 22:59:02,163 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 22:59:02,175 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 22:59:03,868 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 22:59:04,012 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 22:59:04,012 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 22:59:04,034 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 22:59:04,058 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56554365]; rollback [true]
2020-05-10 22:59:04,165 WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver.logException:199 - Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.time.LocalDate'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@org.springframework.web.bind.annotation.RequestParam java.time.LocalDate] for value '2020-04-01'; nested exception is java.lang.IllegalArgumentException: Parse attempt failed for value [2020-04-01]]
2020-05-10 22:59:04,178 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 22:59:04,209 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:00:20,258 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:00:20,295 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:00:21,275 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:00:21,495 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 181ms. Found 5 JPA repository interfaces.
2020-05-10 23:00:22,344 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:00:22,488 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:00:22,712 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:00:23,541 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:00:24,093 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:00:24,791 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:00:24,805 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:00:26,638 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:00:26,785 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:00:26,786 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:00:26,812 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 25 ms
2020-05-10 23:00:26,839 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@32f14274]; rollback [true]
2020-05-10 23:00:26,940 WARN  o.s.w.s.m.support.DefaultHandlerExceptionResolver.logException:199 - Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.time.LocalDate'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@org.springframework.web.bind.annotation.RequestParam java.time.LocalDate] for value '2020-04-01'; nested exception is java.lang.IllegalArgumentException: Parse attempt failed for value [2020-04-01]]
2020-05-10 23:00:26,953 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<400>, mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:00:26,980 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:02:46,225 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:02:46,257 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:02:47,108 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:02:47,264 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-10 23:02:47,872 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:02:47,982 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:02:48,174 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:02:48,950 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:02:49,541 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:02:50,232 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:02:50,244 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:02:52,051 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:02:52,204 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:02:52,205 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:02:52,227 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 23:02:52,251 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56554365]; rollback [true]
2020-05-10 23:02:52,352 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:02:52,390 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: For queries with named parameters you need to use provide names for method parameters. Use @Param for query method parameters, or when on Java 8+ use the javac flag -parameters.; nested exception is java.lang.IllegalStateException: For queries with named parameters you need to use provide names for method parameters. Use @Param for query method parameters, or when on Java 8+ use the javac flag -parameters., mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:02:52,423 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:04:17,428 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:04:17,463 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:04:18,370 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:04:18,533 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 144ms. Found 5 JPA repository interfaces.
2020-05-10 23:04:19,106 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:04:19,215 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:04:19,413 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:04:20,190 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:04:20,725 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:04:21,327 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:04:21,339 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:04:22,449 WARN  o.s.w.context.support.GenericWebApplicationContext.refresh:558 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteService' defined in file [C:\Java\WhatAboutTheDinner\target\classes\ru\restaurant\service\VoteService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id'!
2020-05-10 23:04:22,451 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:04:22,456 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@5621a671]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteService' defined in file [C:\Java\WhatAboutTheDinner\target\classes\ru\restaurant\service\VoteService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id'!
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:228)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:882)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:129)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id'!
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1290)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1210)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 81 common frames omitted
Caused by: java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id'!
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.assertParameterNamesInAnnotatedQuery(JpaQueryMethod.java:156)
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.<init>(JpaQueryMethod.java:135)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:78)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lookupQuery(RepositoryFactorySupport.java:574)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(RepositoryFactorySupport.java:567)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1052)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.mapMethodsToQuery(RepositoryFactorySupport.java:569)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$new$0(RepositoryFactorySupport.java:559)
	at java.base/java.util.Optional.map(Optional.java:265)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:559)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:332)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:212)
	at org.springframework.data.util.Lazy.get(Lazy.java:94)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:121)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	... 92 common frames omitted
2020-05-10 23:05:43,151 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:05:43,176 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:05:44,032 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:05:44,182 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 131ms. Found 5 JPA repository interfaces.
2020-05-10 23:05:44,788 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:05:44,895 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:05:45,093 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:05:45,912 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:05:46,384 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:05:46,986 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:05:46,997 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:05:48,609 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:05:48,755 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:05:48,755 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:05:48,781 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 25 ms
2020-05-10 23:05:48,815 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56554365]; rollback [true]
2020-05-10 23:05:48,924 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:05:48,975 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: For queries with named parameters you need to use provide names for method parameters. Use @Param for query method parameters, or when on Java 8+ use the javac flag -parameters.; nested exception is java.lang.IllegalStateException: For queries with named parameters you need to use provide names for method parameters. Use @Param for query method parameters, or when on Java 8+ use the javac flag -parameters., mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:05:49,016 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:06:32,439 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:06:32,472 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:06:33,339 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:06:33,479 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 123ms. Found 5 JPA repository interfaces.
2020-05-10 23:06:34,184 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:06:34,307 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:06:34,494 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:06:35,249 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:06:35,713 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:06:36,358 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:06:36,371 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:06:37,577 WARN  o.s.w.context.support.GenericWebApplicationContext.refresh:558 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteService' defined in file [C:\Java\WhatAboutTheDinner\target\classes\ru\restaurant\service\VoteService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id GROUP BY v.restaurant.name'!
2020-05-10 23:06:37,579 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:06:37,588 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@983050b]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteService' defined in file [C:\Java\WhatAboutTheDinner\target\classes\ru\restaurant\service\VoteService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id GROUP BY v.restaurant.name'!
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:228)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:882)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:129)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'voteRepository': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id GROUP BY v.restaurant.name'!
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1290)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1210)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 81 common frames omitted
Caused by: java.lang.IllegalStateException: Using named parameters for method public abstract java.util.List ru.restaurant.repository.VoteRepository.getResultByDate(java.time.LocalDate) but parameter 'Optional[date]' not found in annotated query 'SELECT new ru.restaurant.to.VoteTo(v.restaurant.name, COUNT(v)) FROM Vote v WHERE v.id=:id GROUP BY v.restaurant.name'!
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.assertParameterNamesInAnnotatedQuery(JpaQueryMethod.java:156)
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.<init>(JpaQueryMethod.java:135)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:78)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lookupQuery(RepositoryFactorySupport.java:574)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(RepositoryFactorySupport.java:567)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1052)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.mapMethodsToQuery(RepositoryFactorySupport.java:569)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$new$0(RepositoryFactorySupport.java:559)
	at java.base/java.util.Optional.map(Optional.java:265)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:559)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:332)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:212)
	at org.springframework.data.util.Lazy.get(Lazy.java:94)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:121)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	... 92 common frames omitted
2020-05-10 23:10:14,843 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:10:14,873 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:10:15,694 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:10:15,848 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 136ms. Found 5 JPA repository interfaces.
2020-05-10 23:10:16,663 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:10:16,813 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:10:17,052 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:10:17,842 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:10:18,328 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:10:19,135 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:10:19,147 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:10:20,825 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:10:20,976 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:10:20,977 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:10:21,000 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-10 23:10:21,025 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56554365]; rollback [true]
2020-05-10 23:10:21,134 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:10:21,188 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Named parameter not bound : id; nested exception is org.hibernate.QueryException: Named parameter not bound : id, mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:10:21,221 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:13:57,000 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:13:57,031 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:13:57,858 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:13:58,017 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-10 23:13:58,735 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:13:58,848 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:13:59,051 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:13:59,823 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:14:00,440 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:14:01,155 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:14:01,167 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:14:02,858 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:14:03,008 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:14:03,008 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:14:03,030 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 23:14:03,055 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@32f14274]; rollback [true]
2020-05-10 23:14:03,152 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:14:03,247 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = java.lang.AssertionError: Content type not set, mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:14:03,273 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:15:15,836 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:15:15,864 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:15:16,690 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:15:16,872 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 158ms. Found 5 JPA repository interfaces.
2020-05-10 23:15:17,676 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:15:17,774 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:15:17,973 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:15:18,750 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:15:19,235 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:15:19,901 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:15:19,913 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:15:21,608 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:15:21,786 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:15:21,787 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:15:21,812 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-10 23:15:21,837 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@56554365]; rollback [true]
2020-05-10 23:15:21,925 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:15:22,223 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@61e0f9b9 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@2c7c898a, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"restaurantName":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@4a86be01 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:15:22,262 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:16:51,187 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:16:51,215 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:16:52,149 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:16:52,300 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 129ms. Found 5 JPA repository interfaces.
2020-05-10 23:16:52,955 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:16:53,098 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:16:53,289 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:16:54,124 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:16:54,629 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:16:55,309 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:16:55,321 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:16:57,011 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:16:57,175 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:16:57,176 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:16:57,200 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-10 23:16:57,225 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@32f14274]; rollback [true]
2020-05-10 23:16:57,324 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:16:57,603 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6296e4bf testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@220cda54, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read array from JSON:
'[{"votes":2,"restaurant":"Lucky Pizza"}]', mergedContextConfiguration = [WebMergedContextConfiguration@39109603 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:16:57,636 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:21:26,262 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:21:26,289 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:21:27,069 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:21:27,236 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 139ms. Found 5 JPA repository interfaces.
2020-05-10 23:21:28,025 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:21:28,141 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:21:28,343 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:21:29,103 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:21:29,583 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:21:30,236 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:21:30,248 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:21:31,963 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:21:32,113 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:21:32,114 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:21:32,135 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-10 23:21:32,159 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-10 23:21:32,253 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:21:32,489 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"votes":2,"restaurant":"Lucky Pizza"}]', mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:21:32,524 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:22:37,066 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:22:37,096 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:22:37,934 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:22:38,109 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 146ms. Found 5 JPA repository interfaces.
2020-05-10 23:22:38,802 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:22:38,915 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:22:39,126 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:22:39,914 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:22:40,467 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:22:41,139 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:22:41,151 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:22:42,875 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:22:43,017 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:22:43,018 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:22:43,037 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-10 23:22:43,060 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-10 23:22:43,164 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:22:43,411 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:22:43,448 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:24:02,298 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:24:02,326 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:24:03,171 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:24:03,341 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-10 23:24:04,271 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:24:04,393 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:24:04,590 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:24:05,381 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:24:05,905 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:24:06,500 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:24:06,512 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:24:08,204 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:24:08,356 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:24:08,357 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:24:08,380 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-10 23:24:08,404 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-10 23:24:08,494 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:24:08,710 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurantName":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:24:08,748 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:26:41,226 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-10 23:26:41,256 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-10 23:26:42,179 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-10 23:26:42,344 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-10 23:26:43,230 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-10 23:26:43,332 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-10 23:26:43,522 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-10 23:26:44,279 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-10 23:26:44,747 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-10 23:26:45,404 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-10 23:26:45,418 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-10 23:26:47,100 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-10 23:26:47,252 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-10 23:26:47,252 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-10 23:26:47,272 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-10 23:26:47,295 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-10 23:26:47,381 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-10 23:26:47,643 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"votes":2,"restaurant":"Lucky Pizza"}]', mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-10 23:26:47,679 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:38:22,206 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 09:38:22,232 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 09:38:23,087 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 09:38:23,298 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 187ms. Found 5 JPA repository interfaces.
2020-05-11 09:38:24,056 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 09:38:24,231 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 09:38:24,492 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 09:38:25,422 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 09:38:26,145 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 09:38:27,121 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 09:38:27,135 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:38:29,329 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 09:38:29,474 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 09:38:29,475 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 09:38:29,498 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-11 09:38:29,524 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-11 09:38:29,626 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 09:38:29,873 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 09:38:29,907 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:52:34,216 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 09:52:34,263 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-11 09:52:35,049 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 09:52:35,214 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 143ms. Found 5 JPA repository interfaces.
2020-05-11 09:52:35,836 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 09:52:35,948 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 09:52:36,175 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 09:52:37,135 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 09:52:37,775 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 09:52:38,646 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 09:52:38,663 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:52:40,696 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 09:52:40,868 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 09:52:40,869 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 09:52:40,894 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 09:52:40,922 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@77acc95a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@ff1a5a0, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@75c3584e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5169db2f]; rollback [true]
2020-05-11 09:52:41,019 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 09:57:09,563 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@77acc95a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@ff1a5a0, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@75c3584e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 09:57:09,603 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:57:19,694 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 09:57:19,723 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 09:57:20,555 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 09:57:20,712 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 130ms. Found 5 JPA repository interfaces.
2020-05-11 09:57:21,345 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 09:57:21,456 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 09:57:21,718 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 09:57:22,674 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 09:57:23,206 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 09:57:23,887 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 09:57:23,898 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:57:25,545 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 09:57:25,688 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 09:57:25,689 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 09:57:25,710 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 09:57:25,731 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 09:57:25,849 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 09:57:26,208 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[ru.restaurant.to.VoteTo@4866a755]>
to be equal to:
 <[ru.restaurant.to.VoteTo@1361e880]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 09:57:26,232 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:59:38,323 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 09:59:38,355 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 09:59:39,205 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 09:59:39,350 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 127ms. Found 5 JPA repository interfaces.
2020-05-11 09:59:40,274 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 09:59:40,383 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 09:59:40,568 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 09:59:41,390 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 09:59:41,841 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 09:59:42,490 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 09:59:42,502 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 09:59:44,168 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 09:59:44,314 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 09:59:44,314 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 09:59:44,333 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 18 ms
2020-05-11 09:59:44,354 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 09:59:44,474 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 09:59:44,820 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:restaurant:Lucky Pizzavotes2] (ArrayList@3dad8bde)">
to be equal to:
 <"[VoteTo:restaurant:Lucky Pizzavotes2] (List12@301f9aa0)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 09:59:44,845 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:02:35,317 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:02:35,346 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:02:36,235 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:02:36,418 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 154ms. Found 5 JPA repository interfaces.
2020-05-11 10:02:37,345 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:02:37,509 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:02:37,773 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:02:38,566 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:02:39,014 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:02:39,683 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:02:39,695 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:02:41,419 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:02:41,548 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:02:41,549 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:02:41,568 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 10:02:41,588 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@18df26a1 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5c459194, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@61d8a491 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3ea6faf0]; rollback [true]
2020-05-11 10:02:41,659 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-11 10:02:42,028 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@18df26a1 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5c459194, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@61d8a491 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:02:42,046 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:04:27,535 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:04:27,566 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:04:28,373 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:04:28,542 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 129ms. Found 5 JPA repository interfaces.
2020-05-11 10:04:29,456 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:04:29,599 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:04:29,836 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:04:30,854 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:04:31,450 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:04:32,140 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:04:32,152 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:04:33,944 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:04:34,111 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:04:34,112 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:04:34,137 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 10:04:34,166 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:04:34,261 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 10:04:34,617 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizzavotes:2}] (ArrayList@f833223)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizzavotes:2}] (List12@5186b78a)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:04:34,646 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:06:05,576 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:06:05,604 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:06:06,376 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:06:06,532 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 138ms. Found 5 JPA repository interfaces.
2020-05-11 10:06:07,303 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:06:07,423 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:06:07,621 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:06:08,513 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:06:08,985 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:06:09,658 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:06:09,670 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:06:11,351 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:06:11,498 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:06:11,499 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:06:11,521 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-11 10:06:11,545 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7af56b26]; rollback [true]
2020-05-11 10:06:11,631 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 10:06:11,945 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[VoteTo:{restaurant:Lucky Pizza, votes:2}]>
to be equal to:
 <[VoteTo:{restaurant:Lucky Pizza, votes:21}]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:06:11,971 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:06:53,667 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:06:53,696 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:06:54,462 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:06:54,610 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 127ms. Found 5 JPA repository interfaces.
2020-05-11 10:06:55,289 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:06:55,423 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:06:55,652 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:06:56,486 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:06:57,008 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:06:57,774 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:06:57,789 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:06:59,549 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:06:59,685 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:06:59,685 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:06:59,705 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 10:06:59,727 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-11 10:06:59,813 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 10:07:00,162 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@6b6606d1)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (List12@27605b87)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:07:00,191 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:08:32,514 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:08:32,546 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-11 10:08:33,401 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:08:33,600 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 180ms. Found 5 JPA repository interfaces.
2020-05-11 10:08:34,358 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:08:34,501 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:08:34,705 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:08:35,541 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:08:36,047 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:08:36,757 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:08:36,772 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:08:38,653 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:08:38,828 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:08:38,829 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:08:38,853 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-11 10:08:38,884 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@209b4b35 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@77acc95a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ff1a5a0 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@49654a35]; rollback [true]
2020-05-11 10:08:38,977 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:84 - Get result of voting
2020-05-11 10:11:14,622 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:12:00,064 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:12:00,099 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:12:01,340 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:12:01,531 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 151ms. Found 5 JPA repository interfaces.
2020-05-11 10:12:02,146 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:12:02,244 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:12:02,444 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:12:03,355 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:12:04,058 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:12:04,792 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:12:04,805 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:12:06,498 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:12:06,643 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:12:06,643 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:12:06,663 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 10:12:06,684 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:12:06,780 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:12:07,152 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@5186b78a)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (List12@3f6a9ba0)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:12:07,182 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:12:58,271 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:12:58,298 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:12:59,145 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:12:59,319 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 145ms. Found 5 JPA repository interfaces.
2020-05-11 10:12:59,852 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:12:59,951 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:13:00,167 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:13:01,129 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:13:01,642 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:13:02,402 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:13:02,414 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:13:04,125 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:13:04,276 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:13:04,277 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:13:04,299 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 21 ms
2020-05-11 10:13:04,323 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 10:13:04,410 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:13:04,744 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@7f2542f)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (List12@3dad8bde)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:13:04,770 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:30:45,511 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:30:45,541 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:30:46,389 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:30:46,560 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 138ms. Found 5 JPA repository interfaces.
2020-05-11 10:30:47,219 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:30:47,354 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:30:47,612 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:30:48,384 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:30:48,845 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:30:49,509 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:30:49,521 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:30:51,203 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:30:51,350 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:30:51,351 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:30:51,371 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 10:30:51,392 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 10:30:51,482 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:30:51,688 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:30:51,722 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:34:32,047 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:34:32,079 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:34:32,887 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:34:33,040 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-11 10:34:33,663 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:34:33,792 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:34:34,036 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:34:34,987 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:34:35,470 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:34:36,238 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:34:36,250 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:34:38,188 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:34:38,394 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:34:38,395 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:34:38,446 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 49 ms
2020-05-11 10:34:38,527 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-11 10:34:38,705 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:34:39,186 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@27605b87)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (SingletonList@1fc4483f)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:34:39,261 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:34:51,679 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:34:51,707 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:34:52,570 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:34:52,733 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-11 10:34:53,425 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:34:53,530 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:34:53,717 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:34:54,684 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:34:55,257 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:34:55,917 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:34:55,929 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:34:57,493 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:34:57,635 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:34:57,636 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:34:57,656 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 10:34:57,683 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:34:57,794 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:34:58,124 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@5186b78a)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (SingletonList@3f6a9ba0)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:34:58,148 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:35:22,431 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:35:22,461 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:35:23,303 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:35:23,467 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 137ms. Found 5 JPA repository interfaces.
2020-05-11 10:35:24,267 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:35:24,375 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:35:24,569 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:35:25,489 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:35:26,003 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:35:26,602 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:35:26,614 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:35:28,381 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:35:28,528 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:35:28,529 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:35:28,549 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 10:35:28,569 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:35:28,645 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:35:28,929 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@5186b78a)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@3f6a9ba0)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:35:28,957 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:49:45,250 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:49:45,285 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:49:46,155 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:49:46,339 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 158ms. Found 5 JPA repository interfaces.
2020-05-11 10:49:46,907 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:49:47,016 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:49:47,241 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:49:48,172 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:49:48,594 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:49:49,289 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:49:49,303 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:49:51,134 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:49:51,287 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:49:51,288 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:49:51,308 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 10:49:51,329 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7af56b26]; rollback [true]
2020-05-11 10:49:51,416 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:49:51,642 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: expected: ru.restaurant.to.VoteTo@48697181<VoteTo:{restaurant:Lucky Pizza, votes:2}> but was: ru.restaurant.to.VoteTo@7282f7b1<VoteTo:{restaurant:Lucky Pizza, votes:2}>, mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:49:51,671 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:53:18,938 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:53:18,971 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:53:19,788 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:53:19,976 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 145ms. Found 5 JPA repository interfaces.
2020-05-11 10:53:20,657 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:53:20,757 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:53:20,958 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:53:21,682 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:53:22,111 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:53:22,736 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:53:22,748 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:53:24,402 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:53:24,569 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:53:24,570 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:53:24,595 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 10:53:24,619 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:53:24,706 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:53:25,046 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@3f6a9ba0)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@1e749235)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:53:25,075 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:54:07,995 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:54:08,029 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:54:08,810 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:54:08,990 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 154ms. Found 5 JPA repository interfaces.
2020-05-11 10:54:09,633 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:54:09,739 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:54:09,966 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:54:10,762 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:54:11,427 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:54:12,084 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:54:12,096 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:54:13,820 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:54:13,976 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:54:13,977 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:54:14,003 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 25 ms
2020-05-11 10:54:14,028 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:54:14,130 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:54:14,381 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:54:14,406 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:58:43,957 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:58:43,996 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:58:44,844 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:58:44,983 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 120ms. Found 5 JPA repository interfaces.
2020-05-11 10:58:45,754 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:58:45,856 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:58:46,046 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:58:46,869 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:58:47,390 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:58:48,119 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:58:48,132 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:58:49,765 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:58:49,919 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:58:49,920 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:58:49,944 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 10:58:49,970 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:58:50,062 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 10:58:50,341 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[VoteTo:{restaurant:Lucky Pizza, votes:2}]>
to be equal to:
 <[]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:58:50,368 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:59:17,931 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 10:59:17,962 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 10:59:18,855 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 10:59:19,014 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-11 10:59:19,695 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 10:59:19,817 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 10:59:20,012 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 10:59:20,757 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 10:59:21,311 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 10:59:21,949 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 10:59:21,961 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 10:59:23,660 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 10:59:23,799 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 10:59:23,799 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 10:59:23,820 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 10:59:23,848 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 10:59:23,945 INFO  ru.restaurant.web.controller.VoteRestController.getByDate:52 - get votes by date 2020-04-01
2020-05-11 10:59:24,297 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 10:59:24,319 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:03:31,389 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:03:31,418 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:03:32,319 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:03:32,502 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 165ms. Found 5 JPA repository interfaces.
2020-05-11 11:03:33,421 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:03:33,523 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:03:33,713 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:03:34,521 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:03:35,092 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:03:35,751 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:03:35,764 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:03:37,443 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:03:37,584 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:03:37,584 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:03:37,605 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 11:03:37,629 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 11:03:37,715 INFO  ru.restaurant.web.controller.VoteRestController.getByDate:52 - get votes by date 2020-04-01
2020-05-11 11:03:38,029 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:03:38,050 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:04:39,138 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:04:39,172 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:04:39,948 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:04:40,113 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 145ms. Found 5 JPA repository interfaces.
2020-05-11 11:04:40,806 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:04:40,918 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:04:41,125 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:04:41,916 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:04:42,463 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:04:43,343 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:04:43,359 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:04:45,031 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:04:45,159 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:04:45,160 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:04:45,181 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 11:04:45,206 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 11:04:45,290 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:04:45,614 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <[VoteTo:{restaurant:Lucky Pizza, votes:2}]>
to be equal to:
 <[]>
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:04:45,641 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:05:51,764 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:05:51,808 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@abf688e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@478ee483, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1a7288a3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2974f221, org.springframework.test.context.transaction.TransactionalTestExecutionListener@58fe0499, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@686449f9, org.springframework.test.context.event.EventPublishingTestExecutionListener@665df3c6]
2020-05-11 11:05:52,680 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:05:52,858 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 157ms. Found 5 JPA repository interfaces.
2020-05-11 11:05:53,612 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:05:53,734 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:05:53,976 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:05:54,938 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:05:55,664 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:05:56,425 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:05:56,438 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:05:58,477 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:05:58,635 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:05:58,635 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:05:58,662 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 26 ms
2020-05-11 11:05:58,692 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@209b4b35 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@77acc95a, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@ff1a5a0 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@49654a35]; rollback [true]
2020-05-11 11:05:58,819 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:05:59,043 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:06:28,397 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:06:28,426 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:06:29,311 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:06:29,461 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 128ms. Found 5 JPA repository interfaces.
2020-05-11 11:06:30,106 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:06:30,206 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:06:30,401 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:06:31,222 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:06:31,702 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:06:32,353 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:06:32,365 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:06:34,030 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:06:34,163 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:06:34,163 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:06:34,182 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 18 ms
2020-05-11 11:06:34,201 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 11:06:34,283 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:06:34,565 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@870a9f2)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@6c2e7591)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:06:34,591 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:08:19,069 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:08:19,099 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:08:19,971 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:08:20,142 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-11 11:08:20,741 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:08:20,854 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:08:21,042 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:08:22,015 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:08:22,513 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:08:23,145 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:08:23,157 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:08:24,899 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:08:25,061 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:08:25,062 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:08:25,081 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 19 ms
2020-05-11 11:08:25,103 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-11 11:08:25,192 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:08:25,512 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@5adc71e7)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@7fc5a558)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:08:25,543 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:09:37,989 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:09:38,030 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:09:38,857 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:09:39,025 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 144ms. Found 5 JPA repository interfaces.
2020-05-11 11:09:39,692 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:09:39,811 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:09:40,014 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:09:40,775 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:09:41,279 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:09:41,942 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:09:41,954 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:09:43,724 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:09:43,884 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:09:43,885 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:09:43,907 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-11 11:09:43,930 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 11:09:44,030 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:09:44,299 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:09:44,331 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:10:34,534 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:10:34,567 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:10:35,398 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:10:35,566 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 138ms. Found 5 JPA repository interfaces.
2020-05-11 11:10:36,269 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:10:36,415 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:10:36,656 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:10:37,411 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:10:37,948 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:10:38,599 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:10:38,612 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:10:40,270 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:10:40,412 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:10:40,413 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:10:40,436 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 22 ms
2020-05-11 11:10:40,465 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 11:10:40,563 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:10:40,867 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@7f2542f)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (List12@3dad8bde)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:10:40,896 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:11:40,741 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:11:40,772 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:11:41,580 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:11:41,759 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 152ms. Found 5 JPA repository interfaces.
2020-05-11 11:11:42,431 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:11:42,533 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:11:42,748 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:11:43,603 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:11:44,178 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:11:44,794 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:11:44,806 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:11:46,424 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:11:46,559 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:11:46,560 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:11:46,580 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 11:11:46,602 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7af56b26]; rollback [true]
2020-05-11 11:11:46,688 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:11:46,993 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@220cda54 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@39109603, testMethod = getResults@VoteRestControllerTest, testException = org.opentest4j.AssertionFailedError: 
Expecting:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@1d7af82)">
to be equal to:
 <"[VoteTo:{restaurant:Lucky Pizza, votes:2}] (ArrayList@5adc71e7)">
but was not., mergedContextConfiguration = [WebMergedContextConfiguration@4d3990a5 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:11:47,022 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:13:29,909 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:13:29,942 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:13:30,913 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:13:31,121 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 179ms. Found 5 JPA repository interfaces.
2020-05-11 11:13:31,940 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:13:32,106 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:13:32,308 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:13:33,085 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:13:33,667 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:13:34,353 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:13:34,365 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:13:36,036 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:13:36,182 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:13:36,183 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:13:36,204 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 11:13:36,224 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44e4cf8a]; rollback [true]
2020-05-11 11:13:36,308 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:13:36,621 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6d946eee testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@23dc70c1, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@53b907d9 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:13:36,642 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:14:16,851 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:14:16,884 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:14:17,687 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:14:17,851 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-11 11:14:18,542 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:14:18,673 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:14:18,927 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:14:19,894 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:14:20,354 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:14:20,998 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:14:21,011 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:14:22,677 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:14:22,819 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:14:22,820 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:14:22,844 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 23 ms
2020-05-11 11:14:22,868 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 11:14:22,961 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:14:23,229 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'[{"restaurant":"Lucky Pizza","votes":2}]', mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:14:23,260 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:14:53,785 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:14:53,813 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:14:54,697 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:14:54,886 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 154ms. Found 5 JPA repository interfaces.
2020-05-11 11:14:55,870 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:14:55,979 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:14:56,173 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:14:56,930 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:14:57,492 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:14:58,268 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:14:58,280 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:15:00,021 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:15:00,197 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:15:00,198 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:15:00,223 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 11:15:00,248 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@c86c486]; rollback [true]
2020-05-11 11:15:00,335 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:15:00,634 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@39109603 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4d3990a5, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@18df26a1 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:15:00,659 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:22:57,962 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:22:57,994 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:22:58,901 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:22:59,093 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 164ms. Found 5 JPA repository interfaces.
2020-05-11 11:22:59,869 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:23:00,036 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:23:00,288 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:23:01,252 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:23:01,722 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:23:02,346 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:23:02,359 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:23:04,026 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:23:04,191 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:23:04,192 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:23:04,213 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 20 ms
2020-05-11 11:23:04,235 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@666b1244]; rollback [true]
2020-05-11 11:23:04,318 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:23:04,609 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c7c898a testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@4a86be01, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3cae4518 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:23:04,632 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:39:44,383 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:39:44,445 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3b00856b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3016fd5e, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@53d102a2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6c45ee6e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b3e12b5, org.springframework.test.context.event.EventPublishingTestExecutionListener@5aac4250]
2020-05-11 11:39:46,988 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:39:47,403 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 351ms. Found 5 JPA repository interfaces.
2020-05-11 11:39:48,597 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:39:48,831 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:39:49,454 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:39:51,043 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:39:52,302 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:39:53,752 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:39:53,781 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:39:57,128 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 11:39:57,445 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 11:39:57,446 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 11:39:57,495 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 48 ms
2020-05-11 11:39:57,544 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2c3b0cc8 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6296e4bf, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@220cda54 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@508b4f70]; rollback [true]
2020-05-11 11:39:57,731 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 11:39:58,485 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2c3b0cc8 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6296e4bf, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@220cda54 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 11:39:58,545 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:50:20,553 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:50:20,599 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1338fb5, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42463763, org.springframework.test.context.support.DirtiesContextTestExecutionListener@59f63e24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@61f05988, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ca33c24, org.springframework.test.context.event.EventPublishingTestExecutionListener@fade1fc]
2020-05-11 11:50:21,324 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 11:50:21,343 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 11:50:21,345 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 11:50:21,429 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 11:50:21,430 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 11:50:21,434 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 11:50:21,903 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 11:50:22,725 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:50:22,978 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 219ms. Found 5 JPA repository interfaces.
2020-05-11 11:50:24,014 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:50:24,240 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:50:24,623 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:50:25,709 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:50:26,727 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:50:27,789 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:50:27,815 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:50:27,902 WARN  o.s.w.context.support.GenericWebApplicationContext.refresh:558 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'restSecurityFilterChain' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
2020-05-11 11:50:27,903 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:50:27,919 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@6200b644]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'restSecurityFilterChain' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:428)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:173)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1699)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1444)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:863)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:129)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:428)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:173)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 83 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)
	... 97 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 105 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1818)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1266)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 117 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.security.config.authentication.AuthenticationManagerFactoryBean.getObject(AuthenticationManagerFactoryBean.java:59)
	at org.springframework.security.config.authentication.AuthenticationManagerFactoryBean.getObject(AuthenticationManagerFactoryBean.java:41)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:171)
	... 123 common frames omitted
2020-05-11 11:54:55,766 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:54:55,808 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1338fb5, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42463763, org.springframework.test.context.support.DirtiesContextTestExecutionListener@59f63e24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@61f05988, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ca33c24, org.springframework.test.context.event.EventPublishingTestExecutionListener@fade1fc]
2020-05-11 11:54:56,290 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 11:54:56,296 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 11:54:56,297 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 11:54:56,359 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 11:54:56,360 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 11:54:56,362 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 11:54:56,684 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 11:54:57,018 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 11:54:57,170 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 133ms. Found 5 JPA repository interfaces.
2020-05-11 11:54:57,773 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 11:54:57,892 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 11:54:58,089 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 11:54:58,658 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 11:54:59,241 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 11:54:59,883 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 11:54:59,895 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:54:59,956 WARN  o.s.w.context.support.GenericWebApplicationContext.refresh:558 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'restSecurityFilterChain' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
2020-05-11 11:54:59,957 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 11:54:59,969 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@6200b644]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'restSecurityFilterChain' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:428)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:173)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1699)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1444)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:863)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:129)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restSecurityFilterChain': Cannot create inner bean '(inner bean)#5909ae90' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:428)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:173)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 83 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5909ae90': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)
	... 97 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 105 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1818)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1266)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
	... 117 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.security.authenticationManager' available: Did you forget to add a global <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements.
	at org.springframework.security.config.authentication.AuthenticationManagerFactoryBean.getObject(AuthenticationManagerFactoryBean.java:59)
	at org.springframework.security.config.authentication.AuthenticationManagerFactoryBean.getObject(AuthenticationManagerFactoryBean.java:41)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:171)
	... 123 common frames omitted
2020-05-11 11:57:22,302 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 11:57:22,333 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1338fb5, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@42463763, org.springframework.test.context.support.DirtiesContextTestExecutionListener@59f63e24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@61f05988, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7ca33c24, org.springframework.test.context.event.EventPublishingTestExecutionListener@fade1fc]
2020-05-11 11:57:22,813 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 11:57:22,825 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 11:57:22,826 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 11:57:22,913 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 11:57:22,915 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 11:57:22,916 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 11:57:23,248 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 11:57:23,420 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@5aac4250] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@58a55449]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [spring/spring-mvc.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 100; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:400)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)
	at org.springframework.test.context.web.GenericXmlWebContextLoader.loadBeanDefinitions(GenericXmlWebContextLoader.java:47)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:126)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:511)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3587)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2143)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:849)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:351)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2708)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
	at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:77)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadDocument(XmlBeanDefinitionReader.java:430)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
	... 76 common frames omitted
2020-05-11 12:01:45,401 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:01:45,443 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61f05988, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7ca33c24, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fade1fc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@67c2e933, org.springframework.test.context.transaction.TransactionalTestExecutionListener@41dd05a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@613a8ee1, org.springframework.test.context.event.EventPublishingTestExecutionListener@178213b]
2020-05-11 12:01:45,978 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:01:45,984 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:01:45,986 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:01:46,049 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:01:46,051 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:01:46,052 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:01:46,385 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:01:46,392 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:01:46,393 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:01:46,393 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:01:46,394 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:01:46,395 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:01:46,395 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:01:46,396 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:01:46,403 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:01:46,534 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@61f05988] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@6831d8fd]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [spring/spring-mvc.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 100; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:400)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)
	at org.springframework.test.context.web.GenericXmlWebContextLoader.loadBeanDefinitions(GenericXmlWebContextLoader.java:47)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:126)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:511)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3587)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2143)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:849)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:351)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2708)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
	at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:77)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadDocument(XmlBeanDefinitionReader.java:430)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
	... 76 common frames omitted
2020-05-11 12:20:22,531 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:20:22,559 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@613a8ee1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@178213b, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7103cb56, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1b765a2c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e8e8225, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6ebf0f36, org.springframework.test.context.event.EventPublishingTestExecutionListener@18920cc]
2020-05-11 12:20:23,057 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:20:23,063 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:20:23,064 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:20:23,127 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:20:23,129 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:20:23,130 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:20:23,469 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:20:23,477 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:20:23,478 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:20:23,478 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:20:23,479 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:20:23,479 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:20:23,480 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:20:23,480 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:20:23,490 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:20:23,765 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@613a8ee1] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@6058e535]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [spring/spring-mvc.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 100; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:400)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)
	at org.springframework.test.context.web.GenericXmlWebContextLoader.loadBeanDefinitions(GenericXmlWebContextLoader.java:47)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:126)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:511)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3587)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2143)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:849)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:351)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2708)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
	at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:77)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadDocument(XmlBeanDefinitionReader.java:430)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
	... 76 common frames omitted
2020-05-11 12:25:46,863 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:25:46,902 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61f05988, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7ca33c24, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fade1fc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@67c2e933, org.springframework.test.context.transaction.TransactionalTestExecutionListener@41dd05a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@613a8ee1, org.springframework.test.context.event.EventPublishingTestExecutionListener@178213b]
2020-05-11 12:25:47,507 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:25:47,515 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:25:47,519 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:25:47,625 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:25:47,628 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:25:47,631 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:25:48,005 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:25:48,012 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:25:48,013 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:25:48,013 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:25:48,014 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:25:48,014 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:25:48,015 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:25:48,015 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:25:48,024 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:25:48,225 ERROR o.springframework.test.context.TestContextManager.prepareTestInstance:248 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@61f05988] to prepare test instance [ru.restaurant.web.controller.VoteRestControllerTest@5cbf9e9f]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [spring/spring-mvc.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 100; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:400)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)
	at org.springframework.test.context.web.GenericXmlWebContextLoader.loadBeanDefinitions(GenericXmlWebContextLoader.java:47)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:126)
	at org.springframework.test.context.web.AbstractGenericWebContextLoader.loadContext(AbstractGenericWebContextLoader.java:61)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 63 common frames omitted
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)
	at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:511)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3587)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2143)
	at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:849)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:351)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2708)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
	at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:77)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadDocument(XmlBeanDefinitionReader.java:430)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
	... 76 common frames omitted
2020-05-11 12:27:52,100 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:27:52,150 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61f05988, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7ca33c24, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fade1fc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@67c2e933, org.springframework.test.context.transaction.TransactionalTestExecutionListener@41dd05a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@613a8ee1, org.springframework.test.context.event.EventPublishingTestExecutionListener@178213b]
2020-05-11 12:27:52,770 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:27:52,777 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:27:52,778 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:27:52,864 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:27:52,866 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:27:52,867 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:27:53,190 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:27:53,197 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:27:53,198 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:27:53,199 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:27:53,199 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:27:53,200 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:27:53,200 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:27:53,201 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:27:53,208 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:27:53,374 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:27:53,623 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:27:53,809 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 159ms. Found 5 JPA repository interfaces.
2020-05-11 12:27:54,861 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:27:55,110 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:27:55,397 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:27:56,120 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:27:56,839 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:27:57,484 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:27:57,503 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:27:57,937 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@60a6840c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6de33fde, org.springframework.security.web.header.HeaderWriterFilter@430d3021, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2c15034f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d011e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb44a2f, org.springframework.security.web.access.ExceptionTranslationFilter@67e4928c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2f166d61]
2020-05-11 12:27:58,081 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2b1d1a5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b66ac74, org.springframework.security.web.header.HeaderWriterFilter@3573e19d, org.springframework.security.web.authentication.logout.LogoutFilter@2aa07d80, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3c89b864, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3639b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b59c3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d0b447b, org.springframework.security.web.session.SessionManagementFilter@252d8df6, org.springframework.security.web.access.ExceptionTranslationFilter@30ef32eb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@41f40dfa]
2020-05-11 12:27:58,100 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:28:00,024 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:28:00,197 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:28:00,198 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:28:00,227 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 28 ms
2020-05-11 12:28:00,251 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@5f14590c testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@46051269, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@67baa05 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@42a7e7e1]; rollback [true]
2020-05-11 12:28:00,326 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 12:28:00,633 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@5f14590c testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@46051269, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@67baa05 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:28:00,660 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:29:15,077 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:29:15,114 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61f05988, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7ca33c24, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fade1fc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@67c2e933, org.springframework.test.context.transaction.TransactionalTestExecutionListener@41dd05a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@613a8ee1, org.springframework.test.context.event.EventPublishingTestExecutionListener@178213b]
2020-05-11 12:29:15,692 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:29:15,699 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:29:15,700 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:29:15,772 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:29:15,773 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:29:15,775 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:29:16,101 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:29:16,112 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:29:16,112 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:29:16,113 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:29:16,114 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:29:16,115 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:29:16,115 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:29:16,133 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:29:16,525 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:29:16,767 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:29:16,961 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 167ms. Found 5 JPA repository interfaces.
2020-05-11 12:29:17,795 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:29:17,905 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:29:18,122 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:29:18,709 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:29:19,309 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:29:19,950 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:29:19,962 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:29:20,297 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@60a6840c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6de33fde, org.springframework.security.web.header.HeaderWriterFilter@430d3021, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2c15034f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d011e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb44a2f, org.springframework.security.web.access.ExceptionTranslationFilter@67e4928c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2f166d61]
2020-05-11 12:29:20,391 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2b1d1a5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b66ac74, org.springframework.security.web.header.HeaderWriterFilter@3573e19d, org.springframework.security.web.authentication.logout.LogoutFilter@2aa07d80, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3c89b864, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3639b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b59c3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d0b447b, org.springframework.security.web.session.SessionManagementFilter@252d8df6, org.springframework.security.web.access.ExceptionTranslationFilter@30ef32eb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@611a2d82]
2020-05-11 12:29:20,408 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:29:22,210 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:29:22,365 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:29:22,365 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:29:22,390 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 24 ms
2020-05-11 12:29:22,412 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@69926b6e testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@7ea8224b, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a010eec testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@23b087c3]; rollback [true]
2020-05-11 12:29:22,502 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 12:29:22,820 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@69926b6e testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@7ea8224b, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5a010eec testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:29:22,848 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:31:50,875 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:31:50,906 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61f05988, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7ca33c24, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@fade1fc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@67c2e933, org.springframework.test.context.transaction.TransactionalTestExecutionListener@41dd05a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@613a8ee1, org.springframework.test.context.event.EventPublishingTestExecutionListener@178213b]
2020-05-11 12:31:51,394 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:31:51,401 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:31:51,403 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:31:51,473 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:31:51,474 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:31:51,475 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:31:51,786 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:31:51,794 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:31:51,795 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:31:51,795 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:31:51,796 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:31:51,797 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:31:51,797 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:31:51,797 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:31:51,805 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:31:51,943 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:31:52,153 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:31:52,303 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 132ms. Found 5 JPA repository interfaces.
2020-05-11 12:31:53,151 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:31:53,270 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:31:53,481 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:31:54,058 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:31:54,623 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:31:55,289 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:31:55,302 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:31:55,685 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@60a6840c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6de33fde, org.springframework.security.web.header.HeaderWriterFilter@430d3021, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2c15034f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d011e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb44a2f, org.springframework.security.web.access.ExceptionTranslationFilter@67e4928c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2f166d61]
2020-05-11 12:31:55,778 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2b1d1a5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b66ac74, org.springframework.security.web.header.HeaderWriterFilter@3573e19d, org.springframework.security.web.authentication.logout.LogoutFilter@2aa07d80, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3c89b864, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3639b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b59c3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d0b447b, org.springframework.security.web.session.SessionManagementFilter@252d8df6, org.springframework.security.web.access.ExceptionTranslationFilter@30ef32eb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@41f40dfa]
2020-05-11 12:31:55,797 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:31:57,579 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:31:57,732 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:31:57,733 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:31:57,763 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-11 12:31:57,791 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@5f14590c testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@46051269, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@67baa05 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@42a7e7e1]; rollback [true]
2020-05-11 12:31:57,886 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 12:31:58,199 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@5f14590c testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@46051269, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@67baa05 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:31:58,227 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:34:54,468 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2020-05-11 12:34:54,502 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@613a8ee1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@178213b, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7103cb56, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1b765a2c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2e8e8225, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6ebf0f36, org.springframework.test.context.event.EventPublishingTestExecutionListener@18920cc]
2020-05-11 12:34:55,018 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:34:55,026 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:34:55,027 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:34:55,095 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:34:55,097 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:34:55,098 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:34:55,410 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:34:55,418 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:34:55,419 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:34:55,420 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:34:55,420 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:34:55,421 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:34:55,421 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:34:55,422 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:34:55,430 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:34:55,821 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:34:56,001 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:34:56,173 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 151ms. Found 5 JPA repository interfaces.
2020-05-11 12:34:56,815 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:34:56,927 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:34:57,160 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:34:57,732 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:34:58,250 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:34:58,888 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:34:58,901 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:34:59,213 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@60a6840c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6de33fde, org.springframework.security.web.header.HeaderWriterFilter@430d3021, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2c15034f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d011e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1cb44a2f, org.springframework.security.web.access.ExceptionTranslationFilter@67e4928c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2f166d61]
2020-05-11 12:34:59,339 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2b1d1a5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b66ac74, org.springframework.security.web.header.HeaderWriterFilter@3573e19d, org.springframework.security.web.authentication.logout.LogoutFilter@2aa07d80, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3c89b864, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3639b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b59c3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d0b447b, org.springframework.security.web.session.SessionManagementFilter@252d8df6, org.springframework.security.web.access.ExceptionTranslationFilter@30ef32eb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@41f40dfa]
2020-05-11 12:34:59,361 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:35:01,188 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:35:01,356 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:35:01,357 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:35:01,390 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 32 ms
2020-05-11 12:35:01,418 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@633cad4d testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@15c3585, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5b86f4cb testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@761b9314]; rollback [true]
2020-05-11 12:35:01,503 INFO  ru.restaurant.web.controller.AdminRestController.getByMail:59 - getByEmail admin@gmail.com
2020-05-11 12:35:01,909 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@633cad4d testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@15c3585, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5b86f4cb testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:35:01,945 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:43:44,966 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:43:45,018 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2d1dee39, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@48d5f34e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@fc258b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6ff65192, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2dd80673, org.springframework.test.context.event.EventPublishingTestExecutionListener@4af0df05, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@57ea113a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@acdb094]
2020-05-11 12:43:45,700 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:43:45,707 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:43:45,708 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:43:45,766 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:43:45,767 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:43:45,769 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:43:46,093 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:43:46,100 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:43:46,101 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:43:46,101 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:43:46,102 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:43:46,102 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:43:46,103 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:43:46,103 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:43:46,110 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:43:46,256 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:43:46,498 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:43:46,655 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 130ms. Found 5 JPA repository interfaces.
2020-05-11 12:43:47,427 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:43:47,546 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:43:47,838 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:43:48,393 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:43:48,972 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:43:49,591 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:43:49,607 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:43:49,939 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1d9bd1d6]
2020-05-11 12:43:50,050 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dd750ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d5ef1c3, org.springframework.security.web.header.HeaderWriterFilter@160546b1, org.springframework.security.web.authentication.logout.LogoutFilter@a63643e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d0b447b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cf06a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@229cb4d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391dfe7c, org.springframework.security.web.session.SessionManagementFilter@4627dfda, org.springframework.security.web.access.ExceptionTranslationFilter@484302ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 12:43:50,067 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:43:51,803 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:43:52,002 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:43:52,002 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:43:52,035 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 32 ms
2020-05-11 12:43:52,065 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@c79915a testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6173863f, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@a08e41b testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@435a2c7d]; rollback [true]
2020-05-11 12:43:52,145 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@c79915a testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6173863f, testMethod = getByEmail@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@a08e41b testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:43:52,188 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:46:50,716 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:46:50,749 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2d1dee39, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@48d5f34e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@fc258b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6ff65192, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2dd80673, org.springframework.test.context.event.EventPublishingTestExecutionListener@4af0df05, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@57ea113a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@acdb094]
2020-05-11 12:46:51,311 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:46:51,317 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:46:51,319 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:46:51,387 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:46:51,388 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:46:51,390 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:46:51,722 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:46:51,729 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:46:51,729 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:46:51,729 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:46:51,730 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:46:51,730 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:46:51,731 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:46:51,732 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:46:51,739 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:46:51,893 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:46:52,178 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:46:52,340 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 137ms. Found 5 JPA repository interfaces.
2020-05-11 12:46:53,171 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:46:53,306 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:46:53,506 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:46:54,061 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:46:54,646 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:46:55,412 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:46:55,426 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:46:55,787 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1d9bd1d6]
2020-05-11 12:46:55,885 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dd750ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d5ef1c3, org.springframework.security.web.header.HeaderWriterFilter@160546b1, org.springframework.security.web.authentication.logout.LogoutFilter@a63643e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d0b447b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cf06a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@229cb4d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391dfe7c, org.springframework.security.web.session.SessionManagementFilter@4627dfda, org.springframework.security.web.access.ExceptionTranslationFilter@484302ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 12:46:55,903 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:46:57,738 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:46:57,939 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:46:57,940 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:46:57,982 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 41 ms
2020-05-11 12:46:58,011 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2941631f testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6130a6f5, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3fb0d9de testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1b82f62a]; rollback [true]
2020-05-11 12:46:58,404 INFO  ru.restaurant.web.controller.AdminRestController.get:21 - get 100001
2020-05-11 12:46:58,710 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2941631f testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6130a6f5, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3fb0d9de testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:46:58,745 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:48:06,450 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:48:06,484 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2d1dee39, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@48d5f34e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@fc258b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6ff65192, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2dd80673, org.springframework.test.context.event.EventPublishingTestExecutionListener@4af0df05, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@57ea113a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@acdb094]
2020-05-11 12:48:06,996 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:48:07,002 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:48:07,003 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:48:07,066 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:48:07,068 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:48:07,070 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:48:07,381 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:48:07,399 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:48:07,401 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:48:07,402 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:48:07,403 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:48:07,405 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:48:07,406 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:48:07,408 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:48:07,427 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:48:07,708 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:48:07,906 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:48:08,068 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-11 12:48:08,742 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:48:08,871 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:48:09,096 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:48:09,692 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:48:10,354 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:48:10,995 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:48:11,008 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:48:11,323 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1d9bd1d6]
2020-05-11 12:48:11,439 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dd750ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d5ef1c3, org.springframework.security.web.header.HeaderWriterFilter@160546b1, org.springframework.security.web.authentication.logout.LogoutFilter@a63643e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d0b447b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cf06a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@229cb4d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391dfe7c, org.springframework.security.web.session.SessionManagementFilter@4627dfda, org.springframework.security.web.access.ExceptionTranslationFilter@484302ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 12:48:11,456 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:48:13,233 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:48:13,425 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:48:13,426 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:48:13,459 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 33 ms
2020-05-11 12:48:13,483 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@76980c75 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3696d12d, testMethod = getNotFound@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@656672fb testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5e663ab]; rollback [true]
2020-05-11 12:48:13,818 INFO  ru.restaurant.web.controller.AdminRestController.get:21 - get 1
2020-05-11 12:48:13,853 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@76980c75 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3696d12d, testMethod = getNotFound@AdminRestControllerTest, testException = org.springframework.web.util.NestedServletException: Request processing failed; nested exception is ru.restaurant.util.Exception.NotFoundException: id=1, mergedContextConfiguration = [WebMergedContextConfiguration@656672fb testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:48:13,890 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:48:54,483 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:48:54,533 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2d1dee39, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@48d5f34e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@fc258b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6ff65192, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2dd80673, org.springframework.test.context.event.EventPublishingTestExecutionListener@4af0df05, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@57ea113a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@acdb094]
2020-05-11 12:48:55,023 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:48:55,030 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:48:55,032 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:48:55,101 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:48:55,102 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:48:55,104 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:48:55,437 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:48:55,454 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:48:55,455 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:48:55,457 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:48:55,458 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:48:55,460 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:48:55,461 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:48:55,463 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:48:55,483 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:48:55,878 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:48:56,075 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:48:56,234 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 138ms. Found 5 JPA repository interfaces.
2020-05-11 12:48:56,964 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:48:57,065 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:48:57,277 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:48:57,874 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:48:58,491 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:48:59,137 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:48:59,150 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:48:59,459 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1d9bd1d6]
2020-05-11 12:48:59,559 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dd750ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d5ef1c3, org.springframework.security.web.header.HeaderWriterFilter@160546b1, org.springframework.security.web.authentication.logout.LogoutFilter@a63643e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d0b447b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cf06a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@229cb4d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391dfe7c, org.springframework.security.web.session.SessionManagementFilter@4627dfda, org.springframework.security.web.access.ExceptionTranslationFilter@484302ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 12:48:59,579 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:49:01,367 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:49:01,533 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:01,534 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:01,564 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-11 12:49:01,591 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2ad6aeb8, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:49:01,946 INFO  ru.restaurant.web.controller.AdminRestController.getByMail:59 - getByEmail admin@gmail.com
2020-05-11 12:49:02,215 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2ad6aeb8, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:02,237 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:49:17,838 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:49:17,871 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@acdb094, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@674bd420, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2b0f373b, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2ceb80a1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@4b45dcb8, org.springframework.test.context.event.EventPublishingTestExecutionListener@7216fb24, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2072acb2, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@50ecde95]
2020-05-11 12:49:18,411 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:49:18,418 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:49:18,419 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:49:18,507 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:49:18,509 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:49:18,510 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:49:18,841 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:49:18,848 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:49:18,849 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:49:18,850 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:49:18,850 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:49:18,851 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:49:18,851 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:49:18,852 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:49:18,861 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:49:19,066 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:49:19,287 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:49:19,450 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-11 12:49:20,253 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:49:20,361 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:49:20,595 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:49:21,152 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:49:21,732 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:49:22,388 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:49:22,400 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:49:22,719 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b88af70]
2020-05-11 12:49:22,820 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@5bf7f15f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11309dd4, org.springframework.security.web.header.HeaderWriterFilter@32646ecf, org.springframework.security.web.authentication.logout.LogoutFilter@69bca406, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@71ee2fff, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@252d8df6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d3bcd3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29bd2796, org.springframework.security.web.session.SessionManagementFilter@adc3344, org.springframework.security.web.access.ExceptionTranslationFilter@20a946d9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@13aa54f1]
2020-05-11 12:49:22,837 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:49:24,631 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:49:24,828 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:24,829 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:24,862 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 32 ms
2020-05-11 12:49:24,891 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@be9cc86, testMethod = delete@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:24,986 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@be9cc86, testMethod = delete@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,005 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,007 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,010 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:49:25,013 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6870a76f, testMethod = enable@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,022 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6870a76f, testMethod = enable@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,029 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,030 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,035 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-11 12:49:25,039 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3fd21272, testMethod = getAll@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,046 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3fd21272, testMethod = getAll@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,051 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,052 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,055 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 12:49:25,058 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@12aa2cca, testMethod = update@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,178 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@12aa2cca, testMethod = update@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,182 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,183 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,186 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 12:49:25,190 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2a317af7, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,462 INFO  ru.restaurant.web.controller.AdminRestController.get:21 - get 100001
2020-05-11 12:49:25,649 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2a317af7, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,651 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,651 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,654 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:49:25,657 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@13e6c544, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,668 INFO  ru.restaurant.web.controller.AdminRestController.getByMail:59 - getByEmail admin@gmail.com
2020-05-11 12:49:25,687 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@13e6c544, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,689 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:49:25,690 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:49:25,695 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 12:49:25,698 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@7827cdfc, testMethod = createWithLocation@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 12:49:25,705 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@7827cdfc, testMethod = createWithLocation@AdminRestControllerTest, testException = java.lang.AssertionError: Status expected:<201> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:49:25,739 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:52:55,359 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:52:55,392 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2d1dee39, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@48d5f34e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@fc258b1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6ff65192, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2dd80673, org.springframework.test.context.event.EventPublishingTestExecutionListener@4af0df05, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@57ea113a, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@acdb094]
2020-05-11 12:52:55,911 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:52:55,918 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:52:55,919 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:52:55,996 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:52:55,997 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:52:55,999 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:52:56,307 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:52:56,314 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:52:56,315 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:52:56,315 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:52:56,316 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:52:56,316 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:52:56,317 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:52:56,317 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:52:56,324 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:52:56,459 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:52:56,671 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:52:56,830 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 124ms. Found 5 JPA repository interfaces.
2020-05-11 12:52:57,684 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:52:57,910 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:52:58,127 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:52:58,668 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:52:59,128 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:52:59,801 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:52:59,813 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:53:00,127 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1d9bd1d6]
2020-05-11 12:53:00,239 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dd750ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d5ef1c3, org.springframework.security.web.header.HeaderWriterFilter@160546b1, org.springframework.security.web.authentication.logout.LogoutFilter@a63643e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d0b447b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cf06a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@229cb4d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391dfe7c, org.springframework.security.web.session.SessionManagementFilter@4627dfda, org.springframework.security.web.access.ExceptionTranslationFilter@484302ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 12:53:00,263 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:53:02,039 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:53:02,234 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:02,234 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:02,260 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 25 ms
2020-05-11 12:53:02,283 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6b170692, testMethod = getAll@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 12:53:02,629 INFO  ru.restaurant.web.controller.AdminRestController.getAll:26 - getAll
2020-05-11 12:53:02,896 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@6b170692, testMethod = getAll@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:02,921 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:53:38,925 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:53:38,959 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@acdb094, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@674bd420, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2b0f373b, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2ceb80a1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@4b45dcb8, org.springframework.test.context.event.EventPublishingTestExecutionListener@7216fb24, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2072acb2, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@50ecde95]
2020-05-11 12:53:39,437 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:53:39,444 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:53:39,446 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:53:39,515 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:53:39,516 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:53:39,517 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:53:39,841 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:53:39,850 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:53:39,851 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:53:39,852 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:53:39,852 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:53:39,853 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:53:39,854 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:53:39,855 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:53:39,868 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:53:40,174 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:53:40,371 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:53:40,527 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-11 12:53:41,451 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:53:41,562 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:53:41,894 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:53:42,438 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:53:43,108 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:53:43,752 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:53:43,766 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:53:44,081 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b88af70]
2020-05-11 12:53:44,173 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@5bf7f15f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11309dd4, org.springframework.security.web.header.HeaderWriterFilter@32646ecf, org.springframework.security.web.authentication.logout.LogoutFilter@69bca406, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@71ee2fff, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@252d8df6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d3bcd3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29bd2796, org.springframework.security.web.session.SessionManagementFilter@adc3344, org.springframework.security.web.access.ExceptionTranslationFilter@20a946d9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@13aa54f1]
2020-05-11 12:53:44,189 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:53:45,900 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:53:46,078 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:46,079 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:46,108 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-11 12:53:46,133 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2ad6aeb8, testMethod = delete@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:46,484 INFO  ru.restaurant.web.controller.AdminRestController.delete:42 - delete 100000
2020-05-11 12:53:46,565 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2ad6aeb8, testMethod = delete@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:46,574 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:46,575 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:46,578 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:53:46,586 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2e51ede1, testMethod = enable@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:46,598 INFO  ru.restaurant.web.controller.AdminRestController.enable:64 - disable 100000
2020-05-11 12:53:46,631 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2e51ede1, testMethod = enable@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:46,634 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:46,635 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:46,638 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:53:46,641 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2396408a, testMethod = getAll@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:46,649 INFO  ru.restaurant.web.controller.AdminRestController.getAll:26 - getAll
2020-05-11 12:53:46,862 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@2396408a, testMethod = getAll@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:46,864 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:46,865 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:46,868 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 12:53:46,872 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3b3b2290, testMethod = update@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:46,930 INFO  ru.restaurant.web.controller.AdminRestController.update:47 - update User{id=100000, email=user@yandex.ru, name=UpdatedName, enabled=true, roles=[ADMIN], votes=null} with id=100000
2020-05-11 12:53:46,999 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3b3b2290, testMethod = update@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:47,001 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:47,002 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:47,005 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-11 12:53:47,008 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3314f179, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:47,014 INFO  ru.restaurant.web.controller.AdminRestController.get:21 - get 100001
2020-05-11 12:53:47,023 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@3314f179, testMethod = get@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:47,026 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:47,027 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:47,029 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:53:47,032 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@1b08d26f, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:47,040 INFO  ru.restaurant.web.controller.AdminRestController.getByMail:59 - getByEmail admin@gmail.com
2020-05-11 12:53:47,046 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@1b08d26f, testMethod = getByEmail@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:47,049 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:53:47,051 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:53:47,054 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 12:53:47,057 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@1828ab51, testMethod = createWithLocation@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4d9bccfe]; rollback [true]
2020-05-11 12:53:47,070 INFO  ru.restaurant.web.controller.AdminRestController.create:36 - create User{id=null, email=new@gmail.com, name=New, enabled=false, roles=[USER], votes=null}
2020-05-11 12:53:47,106 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@8ad6d29 testClass = AdminRestControllerTest, testInstance = ru.restaurant.web.controller.AdminRestControllerTest@1828ab51, testMethod = createWithLocation@AdminRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4e35a219 testClass = AdminRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:53:47,128 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:53:58,572 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 12:53:58,608 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 12:53:59,154 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 12:53:59,161 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 12:53:59,163 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 12:53:59,230 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 12:53:59,232 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 12:53:59,233 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 12:53:59,566 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 12:53:59,574 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 12:53:59,575 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 12:53:59,575 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 12:53:59,576 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 12:53:59,576 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 12:53:59,577 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 12:53:59,577 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 12:53:59,586 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 12:53:59,734 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 12:53:59,928 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 12:54:00,107 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 158ms. Found 5 JPA repository interfaces.
2020-05-11 12:54:01,083 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 12:54:01,194 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 12:54:01,398 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 12:54:01,967 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 12:54:02,498 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 12:54:03,132 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 12:54:03,145 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 12:54:03,518 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@70c31b17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3dc55719, org.springframework.security.web.header.HeaderWriterFilter@e706aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@212e39ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d2c253, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6acb45c1, org.springframework.security.web.access.ExceptionTranslationFilter@3359c3f6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3b66ac74]
2020-05-11 12:54:03,611 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@37364634, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bf7f15f, org.springframework.security.web.header.HeaderWriterFilter@57839834, org.springframework.security.web.authentication.logout.LogoutFilter@42ffbab6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@d978ab9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@87220f1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@391dfe7c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c135f63, org.springframework.security.web.session.SessionManagementFilter@6e0d058a, org.springframework.security.web.access.ExceptionTranslationFilter@21d8da75, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@19739906]
2020-05-11 12:54:03,629 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 12:54:05,311 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 12:54:05,485 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:54:05,486 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:54:05,520 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 12:54:05,550 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@2941631f, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 12:54:05,621 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@2941631f, testMethod = delete@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:54:05,636 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:54:05,637 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:54:05,640 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:54:05,644 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@67e628b, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 12:54:05,647 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@67e628b, testMethod = getAll@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:54:05,652 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:54:05,653 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:54:05,658 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-11 12:54:05,662 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@7bf16972, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 12:54:05,735 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@7bf16972, testMethod = update@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:54:05,739 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:54:05,740 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:54:05,743 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:54:05,746 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@5d32f5db, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 12:54:05,764 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@5d32f5db, testMethod = get@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:54:05,770 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 12:54:05,770 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 12:54:05,773 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 12:54:05,777 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@5bfdabf3, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 12:54:05,787 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@5bfdabf3, testMethod = createWithLocation@DishRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'', mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 12:54:05,812 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:00:09,890 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:00:09,925 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:00:10,467 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:00:10,475 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:00:10,476 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:00:10,563 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:00:10,565 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:00:10,567 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:00:10,935 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:00:10,943 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 13:00:10,944 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 13:00:10,944 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 13:00:10,945 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 13:00:10,945 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 13:00:10,946 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 13:00:10,946 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 13:00:10,954 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:00:11,094 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:00:11,295 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:00:11,456 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 142ms. Found 5 JPA repository interfaces.
2020-05-11 13:00:12,194 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:00:12,323 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:00:12,547 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:00:13,125 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:00:13,706 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:00:14,412 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:00:14,426 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:00:14,747 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@70c31b17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3dc55719, org.springframework.security.web.header.HeaderWriterFilter@e706aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@212e39ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d2c253, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6acb45c1, org.springframework.security.web.access.ExceptionTranslationFilter@3359c3f6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3b66ac74]
2020-05-11 13:00:14,851 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@37364634, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bf7f15f, org.springframework.security.web.header.HeaderWriterFilter@57839834, org.springframework.security.web.authentication.logout.LogoutFilter@42ffbab6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@d978ab9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@87220f1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@391dfe7c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c135f63, org.springframework.security.web.session.SessionManagementFilter@6e0d058a, org.springframework.security.web.access.ExceptionTranslationFilter@21d8da75, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@19739906]
2020-05-11 13:00:14,869 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:00:16,529 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:00:16,712 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:00:16,713 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:00:16,743 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 30 ms
2020-05-11 13:00:16,764 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@29b0c169, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@334d825c]; rollback [true]
2020-05-11 13:00:17,098 INFO  ru.restaurant.web.controller.DishRestController.delete:68 - delete dish 100002
2020-05-11 13:00:17,165 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@29b0c169, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:00:17,173 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:00:17,174 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:00:17,176 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:00:17,180 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@4281a26f, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@334d825c]; rollback [true]
2020-05-11 13:00:17,186 INFO  ru.restaurant.web.controller.DishRestController.getAll:41 - getAll
2020-05-11 13:00:17,372 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@4281a26f, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:00:17,374 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:00:17,374 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:00:17,377 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:00:17,380 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@6464f017, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@334d825c]; rollback [true]
2020-05-11 13:00:17,407 INFO  ru.restaurant.web.controller.DishRestController.update:60 - update Dish{id=100002, price=75, name='Updated}
2020-05-11 13:00:17,464 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@6464f017, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:00:17,466 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:00:17,467 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:00:17,470 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:00:17,472 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@62c1259f, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@334d825c]; rollback [true]
2020-05-11 13:00:17,480 INFO  ru.restaurant.web.controller.DishRestController.get:35 - get dish with id=100002
2020-05-11 13:00:17,494 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@62c1259f, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:00:17,497 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:00:17,498 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:00:17,500 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:00:17,504 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@4144d4a, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@334d825c]; rollback [true]
2020-05-11 13:00:17,512 INFO  ru.restaurant.web.controller.DishRestController.createWithLocation:47 - create dish=Dish{id=null, price=50, name='New}
2020-05-11 13:00:17,532 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@73417494 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@4144d4a, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d1b4fa1 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:00:17,554 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:01:07,463 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:01:07,499 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:01:08,005 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:01:08,012 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:01:08,013 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:01:08,083 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:01:08,084 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:01:08,085 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:01:08,390 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:01:08,397 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 13:01:08,398 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /**/admin/**
2020-05-11 13:01:08,398 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 13:01:08,399 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 13:01:08,399 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menu/**
2020-05-11 13:01:08,400 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 13:01:08,400 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 13:01:08,408 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:01:08,579 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:01:08,783 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:01:08,943 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-11 13:01:09,665 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:01:09,805 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:01:10,031 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:01:10,567 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:01:11,112 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:01:11,807 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:01:11,821 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:01:12,146 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b88af70]
2020-05-11 13:01:12,250 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@5bf7f15f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11309dd4, org.springframework.security.web.header.HeaderWriterFilter@32646ecf, org.springframework.security.web.authentication.logout.LogoutFilter@69bca406, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@71ee2fff, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@252d8df6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d3bcd3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29bd2796, org.springframework.security.web.session.SessionManagementFilter@adc3344, org.springframework.security.web.access.ExceptionTranslationFilter@20a946d9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@13aa54f1]
2020-05-11 13:01:12,267 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:01:13,947 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:01:14,131 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,131 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,158 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 26 ms
2020-05-11 13:01:14,183 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6b170692, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,247 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6b170692, testMethod = delete@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,263 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,264 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,267 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:01:14,270 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@600e2000, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,289 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@600e2000, testMethod = getAll@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,294 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,295 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,298 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:01:14,302 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4bc9389, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,310 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4bc9389, testMethod = getAllByDate@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,315 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,315 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,318 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:01:14,321 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@59845a40, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,395 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@59845a40, testMethod = update@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,399 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,400 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,403 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:01:14,407 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@17344d7, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,413 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@17344d7, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,416 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,417 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,419 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:01:14,422 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@23909b3, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,427 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@23909b3, testMethod = get@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,431 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:01:14,431 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:01:14,434 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:01:14,437 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7890fbf9, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:01:14,443 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7890fbf9, testMethod = createWithLocation@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<201> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:01:14,468 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:16:45,702 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:16:45,744 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:16:46,286 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:16:46,293 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:16:46,294 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:16:46,357 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:16:46,358 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 13:16:46,360 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 13:16:46,360 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:16:46,360 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:16:46,361 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:16:46,678 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:16:46,686 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 13:16:46,687 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 13:16:46,688 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 13:16:46,700 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:16:46,866 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:16:47,083 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:16:47,243 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 140ms. Found 5 JPA repository interfaces.
2020-05-11 13:16:48,180 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:16:48,283 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:16:48,499 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:16:49,099 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:16:49,736 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:16:50,401 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:16:50,413 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:16:50,695 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:16:50,800 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:16:50,818 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:16:52,553 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:16:52,737 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:16:52,738 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:16:52,766 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 27 ms
2020-05-11 13:16:52,797 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:16:53,151 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:16:53,420 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:16:53,442 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:17:06,673 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:17:06,712 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:17:07,239 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:17:07,245 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:17:07,247 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:17:07,317 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:17:07,318 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 13:17:07,320 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 13:17:07,320 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:17:07,321 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:17:07,323 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:17:07,682 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:17:07,701 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 13:17:07,703 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 13:17:07,705 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 13:17:07,725 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:17:08,055 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:17:08,253 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:17:08,413 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 141ms. Found 5 JPA repository interfaces.
2020-05-11 13:17:09,260 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:17:09,372 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:17:09,592 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:17:10,207 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:17:10,765 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:17:11,445 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:17:11,459 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:17:11,762 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:17:11,884 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:17:11,906 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:17:13,622 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:17:13,796 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:17:13,798 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:17:13,832 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 13:17:13,859 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75df4b1d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43120a77, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3b29d36c]; rollback [true]
2020-05-11 13:17:14,212 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:17:14,507 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75df4b1d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43120a77, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:17:14,541 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:17:27,125 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:17:27,158 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:17:27,618 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:17:27,625 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:17:27,627 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:17:27,733 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:17:27,736 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dish/**
2020-05-11 13:17:27,738 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menu/**
2020-05-11 13:17:27,739 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:17:27,740 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:17:27,742 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:17:28,123 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:17:28,132 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurant/**
2020-05-11 13:17:28,134 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurant/**
2020-05-11 13:17:28,135 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/vote/**
2020-05-11 13:17:28,145 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:17:28,328 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:17:28,526 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:17:28,682 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-11 13:17:29,465 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:17:29,570 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:17:29,794 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:17:30,325 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:17:30,827 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:17:31,584 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:17:31,597 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:17:31,923 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:17:32,027 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:17:32,049 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:17:33,800 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:17:33,977 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:17:33,978 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:17:34,012 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 13:17:34,034 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75df4b1d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43120a77, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3b29d36c]; rollback [true]
2020-05-11 13:17:34,381 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:17:34,688 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75df4b1d testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@43120a77, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:17:34,719 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:19:06,183 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:19:06,219 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:19:06,732 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:19:06,740 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:19:06,741 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:19:06,813 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:19:06,814 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:19:06,816 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:19:06,817 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:19:06,819 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:19:06,820 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:19:07,129 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:19:07,137 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:19:07,138 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:19:07,138 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:19:07,146 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:19:07,304 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:19:07,528 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:19:07,681 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 134ms. Found 5 JPA repository interfaces.
2020-05-11 13:19:08,322 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:19:08,438 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:19:08,678 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:19:09,234 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:19:09,695 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:19:10,325 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:19:10,339 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:19:10,661 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:19:10,775 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:19:10,800 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:19:12,568 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:19:12,751 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:12,752 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:12,778 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 26 ms
2020-05-11 13:19:12,807 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2941631f, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:19:13,141 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2941631f, testMethod = get@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<403>, mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:13,177 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:19:35,865 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:19:35,912 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:19:36,870 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:19:36,881 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:19:36,884 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:19:37,029 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:19:37,031 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:19:37,032 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:19:37,034 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:19:37,035 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:19:37,038 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:19:37,407 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:19:37,415 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:19:37,415 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:19:37,416 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:19:37,423 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:19:37,746 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:19:38,045 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:19:38,388 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 210ms. Found 5 JPA repository interfaces.
2020-05-11 13:19:39,061 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:19:39,171 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:19:39,386 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:19:39,987 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:19:40,545 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:19:41,179 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:19:41,193 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:19:41,520 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@70c31b17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3dc55719, org.springframework.security.web.header.HeaderWriterFilter@e706aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@212e39ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d2c253, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6acb45c1, org.springframework.security.web.access.ExceptionTranslationFilter@3359c3f6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@27b490de]
2020-05-11 13:19:41,617 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dfc59c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b6136eb, org.springframework.security.web.header.HeaderWriterFilter@27fc0217, org.springframework.security.web.authentication.logout.LogoutFilter@2419fe6f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@391dfe7c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63c4d16, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3eb0fd88, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c2cdc67, org.springframework.security.web.session.SessionManagementFilter@199806aa, org.springframework.security.web.access.ExceptionTranslationFilter@611a2d82, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ef60c02]
2020-05-11 13:19:41,633 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:19:43,398 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:19:43,572 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:43,573 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:43,602 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 28 ms
2020-05-11 13:19:43,631 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@478cc5f1, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@af007d6]; rollback [true]
2020-05-11 13:19:43,961 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@478cc5f1, testMethod = delete@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<403>, mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:43,980 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:43,981 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:43,985 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:19:43,990 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@71ce19ee, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@af007d6]; rollback [true]
2020-05-11 13:19:44,022 INFO  ru.restaurant.web.controller.DishRestController.getAll:41 - getAll
2020-05-11 13:19:44,273 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@71ce19ee, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:44,275 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:44,276 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:44,280 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:19:44,286 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@70cdbd18, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@af007d6]; rollback [true]
2020-05-11 13:19:44,331 INFO  ru.restaurant.web.controller.DishRestController.update:60 - update Dish{id=100002, price=75, name='Updated}
2020-05-11 13:19:44,413 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@70cdbd18, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:44,416 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:44,417 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:44,419 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:19:44,423 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@765eb801, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@af007d6]; rollback [true]
2020-05-11 13:19:44,430 INFO  ru.restaurant.web.controller.DishRestController.get:35 - get dish with id=100002
2020-05-11 13:19:44,451 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@765eb801, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:44,453 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:19:44,454 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:19:44,457 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:19:44,461 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@6a906078, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@af007d6]; rollback [true]
2020-05-11 13:19:44,468 INFO  ru.restaurant.web.controller.DishRestController.createWithLocation:47 - create dish=Dish{id=null, price=50, name='New}
2020-05-11 13:19:44,491 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@912a644 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@6a906078, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@245b0bd7 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:19:44,523 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:20:29,377 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:20:29,412 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:20:29,892 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:20:29,898 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:20:29,900 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:20:29,983 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:20:29,984 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:20:29,985 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:20:29,986 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:20:29,987 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:20:29,989 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:20:30,339 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:20:30,345 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:20:30,346 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:20:30,347 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:20:30,354 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:20:30,585 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:20:30,798 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:20:30,957 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 134ms. Found 5 JPA repository interfaces.
2020-05-11 13:20:31,590 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:20:31,697 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:20:32,024 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:20:32,587 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:20:33,049 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:20:33,716 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:20:33,729 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:20:34,074 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@70c31b17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3dc55719, org.springframework.security.web.header.HeaderWriterFilter@e706aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@212e39ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d2c253, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6acb45c1, org.springframework.security.web.access.ExceptionTranslationFilter@3359c3f6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@27b490de]
2020-05-11 13:20:34,190 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@3dfc59c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b6136eb, org.springframework.security.web.header.HeaderWriterFilter@27fc0217, org.springframework.security.web.authentication.logout.LogoutFilter@2419fe6f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@391dfe7c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63c4d16, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3eb0fd88, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c2cdc67, org.springframework.security.web.session.SessionManagementFilter@199806aa, org.springframework.security.web.access.ExceptionTranslationFilter@611a2d82, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ef60c02]
2020-05-11 13:20:34,214 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:20:35,950 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:20:36,137 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:20:36,138 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:20:36,174 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 35 ms
2020-05-11 13:20:36,199 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@2941631f, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:20:36,532 INFO  ru.restaurant.web.controller.DishRestController.delete:68 - delete dish 100002
2020-05-11 13:20:36,603 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@2941631f, testMethod = delete@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:20:36,611 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:20:36,611 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:20:36,614 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:20:36,618 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@38b7004d, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:20:36,625 INFO  ru.restaurant.web.controller.DishRestController.getAll:41 - getAll
2020-05-11 13:20:36,814 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@38b7004d, testMethod = getAll@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:20:36,816 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:20:36,816 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:20:36,819 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:20:36,822 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@3e563293, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:20:36,848 INFO  ru.restaurant.web.controller.DishRestController.update:60 - update Dish{id=100002, price=75, name='Updated}
2020-05-11 13:20:36,906 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@3e563293, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:20:36,908 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:20:36,908 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:20:36,911 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:20:36,914 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@7da9b32c, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:20:36,922 INFO  ru.restaurant.web.controller.DishRestController.get:35 - get dish with id=100002
2020-05-11 13:20:36,937 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@7da9b32c, testMethod = get@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:20:36,939 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:20:36,940 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:20:36,943 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:20:36,946 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@61d9dd15, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:20:36,954 INFO  ru.restaurant.web.controller.DishRestController.createWithLocation:47 - create dish=Dish{id=null, price=50, name='New}
2020-05-11 13:20:36,975 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@61d9dd15, testMethod = createWithLocation@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:20:37,000 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:21:29,688 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:21:29,723 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:21:30,211 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:21:30,218 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:21:30,219 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:21:30,293 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:21:30,295 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:21:30,296 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:21:30,297 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:21:30,298 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:21:30,300 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:21:30,640 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:21:30,649 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:21:30,649 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:21:30,650 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:21:30,658 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:21:30,824 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:21:31,045 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:21:31,184 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 121ms. Found 5 JPA repository interfaces.
2020-05-11 13:21:31,945 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:21:32,054 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:21:32,277 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:21:32,824 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:21:33,292 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:21:34,008 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:21:34,022 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:21:34,326 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3dd750ba]
2020-05-11 13:21:34,424 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@b6136eb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73234691, org.springframework.security.web.header.HeaderWriterFilter@686e7513, org.springframework.security.web.authentication.logout.LogoutFilter@398694a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7d3bcd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@174b8d0e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@484302ee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21d8da75, org.springframework.security.web.session.SessionManagementFilter@fa11fda, org.springframework.security.web.access.ExceptionTranslationFilter@2299f6d7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d0a14c2]
2020-05-11 13:21:34,440 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:21:36,246 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:21:36,438 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:36,439 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:36,477 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 37 ms
2020-05-11 13:21:36,506 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:36,568 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = delete@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:36,584 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:36,585 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:36,589 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:21:36,591 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@46610fc9, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:36,863 INFO  ru.restaurant.web.controller.MenuRestController.getAll:48 - get all menus
2020-05-11 13:21:37,170 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@46610fc9, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,172 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:37,173 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:37,176 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:21:37,181 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7ca0b05e, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:37,213 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:54 - get menus by date 2020-04-01
2020-05-11 13:21:37,233 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7ca0b05e, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,235 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:37,236 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:37,239 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:21:37,242 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@33502cfe, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:37,251 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@33502cfe, testMethod = update@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,255 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:37,256 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:37,259 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:21:37,262 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7a79d99c, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:37,269 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7a79d99c, testMethod = getOfferByDate@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,273 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:37,274 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:37,277 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:21:37,280 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4425b6ed, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:37,292 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:21:37,347 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4425b6ed, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,348 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:21:37,349 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:21:37,352 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:21:37,354 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@601e7c97, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:21:37,360 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@601e7c97, testMethod = createWithLocation@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<201> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:21:37,383 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:23:03,985 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:23:04,027 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:23:04,521 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:23:04,531 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:23:04,532 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:23:04,590 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:23:04,592 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:23:04,592 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:23:04,593 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:23:04,595 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:23:04,596 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:23:04,902 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:23:04,910 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:23:04,910 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:23:04,911 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:23:04,918 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:23:05,105 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:23:05,318 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:23:05,476 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 135ms. Found 5 JPA repository interfaces.
2020-05-11 13:23:06,120 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:23:06,233 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:23:06,440 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:23:07,112 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:23:07,693 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:23:08,487 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:23:08,500 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:23:08,821 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3dd750ba]
2020-05-11 13:23:08,932 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@b6136eb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73234691, org.springframework.security.web.header.HeaderWriterFilter@686e7513, org.springframework.security.web.authentication.logout.LogoutFilter@398694a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7d3bcd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@174b8d0e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@484302ee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21d8da75, org.springframework.security.web.session.SessionManagementFilter@fa11fda, org.springframework.security.web.access.ExceptionTranslationFilter@2299f6d7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d0a14c2]
2020-05-11 13:23:08,949 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:23:10,726 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:23:10,917 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:10,918 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:10,961 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 43 ms
2020-05-11 13:23:10,988 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,062 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@be9cc86, testMethod = delete@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,076 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,076 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,079 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:23:11,082 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@46610fc9, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,399 INFO  ru.restaurant.web.controller.MenuRestController.getAll:48 - get all menus
2020-05-11 13:23:11,676 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@46610fc9, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,679 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,680 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,683 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:23:11,687 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3c717ef2, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,711 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:54 - get menus by date 2020-04-01
2020-05-11 13:23:11,729 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@3c717ef2, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,731 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,731 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,734 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:23:11,737 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1be3a294, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,746 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1be3a294, testMethod = update@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,752 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,752 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,755 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:23:11,758 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@36ce9eaf, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,764 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-11 13:23:11,811 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@36ce9eaf, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,813 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,814 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,816 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-11 13:23:11,819 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1e12fdcf, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,829 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:23:11,886 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@1e12fdcf, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,888 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:23:11,889 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:23:11,892 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:23:11,894 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2389f546, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@201b52f7]; rollback [true]
2020-05-11 13:23:11,900 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@14d513ca testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2389f546, testMethod = createWithLocation@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<201> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@68af8288 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:23:11,924 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:24:05,497 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:24:05,542 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:24:06,170 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:24:06,177 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:24:06,193 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:24:06,284 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:24:06,286 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:24:06,286 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:24:06,287 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:24:06,288 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:24:06,290 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:24:06,698 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:24:06,706 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:24:06,707 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:24:06,707 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:24:06,716 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:24:06,889 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:24:07,139 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:24:07,295 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 138ms. Found 5 JPA repository interfaces.
2020-05-11 13:24:07,929 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:24:08,034 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:24:08,271 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:24:08,870 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:24:09,430 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:24:10,110 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:24:10,124 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:24:10,482 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:24:10,578 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:24:10,602 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:24:12,612 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:24:12,838 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:24:12,838 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:24:12,872 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 13:24:12,901 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b170692 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4d4bac56, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@76980c75 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@794f937a]; rollback [true]
2020-05-11 13:24:13,257 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b170692 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@4d4bac56, testMethod = getAllByDate@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<403>, mergedContextConfiguration = [WebMergedContextConfiguration@76980c75 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:24:13,291 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:25:09,985 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:25:10,023 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:25:10,585 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:25:10,592 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:25:10,593 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:25:10,658 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:25:10,658 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:25:10,659 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:25:10,661 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:25:10,662 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAnonymous()' for /rest/profile/register
2020-05-11 13:25:10,663 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:25:10,985 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:25:10,992 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:25:10,993 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:25:10,994 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:25:11,000 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:25:11,151 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:25:11,357 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:25:11,517 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 139ms. Found 5 JPA repository interfaces.
2020-05-11 13:25:12,246 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:25:12,361 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:25:12,580 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:25:13,132 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:25:13,701 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:25:14,331 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:25:14,345 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:25:14,649 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3dd750ba]
2020-05-11 13:25:14,753 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@b6136eb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73234691, org.springframework.security.web.header.HeaderWriterFilter@686e7513, org.springframework.security.web.authentication.logout.LogoutFilter@398694a6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7d3bcd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@174b8d0e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@484302ee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21d8da75, org.springframework.security.web.session.SessionManagementFilter@fa11fda, org.springframework.security.web.access.ExceptionTranslationFilter@2299f6d7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d0a14c2]
2020-05-11 13:25:14,772 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:25:16,546 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:25:16,729 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:16,730 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:16,756 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 26 ms
2020-05-11 13:25:16,779 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@430db481, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,112 INFO  ru.restaurant.web.controller.MenuRestController.delete:93 - delete menu 100016
2020-05-11 13:25:17,176 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@430db481, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,187 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,188 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,191 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:25:17,213 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2e015ac1, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,224 INFO  ru.restaurant.web.controller.MenuRestController.getAll:48 - get all menus
2020-05-11 13:25:17,487 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2e015ac1, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,489 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,490 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,493 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:25:17,496 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@b307030, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,519 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:54 - get menus by date 2020-04-01
2020-05-11 13:25:17,540 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@b307030, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,542 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,543 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,546 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:25:17,552 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@58189132, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,587 INFO  ru.restaurant.web.controller.MenuRestController.update:85 - update Menu{date=2020-05-09, restaurant=Restaurant:100015(Green Garden), dish=Dish{id=100008, price=110, name='Fried Chicken}} with id=100016
2020-05-11 13:25:17,652 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@58189132, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,653 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,654 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,657 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:25:17,660 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@64745270, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,665 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-11 13:25:17,696 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@64745270, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,697 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,698 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,700 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:25:17,703 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7ec75228, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,710 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:25:17,718 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@7ec75228, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,720 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:25:17,721 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:25:17,723 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:25:17,725 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a08d301, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@d641499]; rollback [true]
2020-05-11 13:25:17,733 INFO  ru.restaurant.web.controller.MenuRestController.createWithLocation:71 - create Menu{date=3000-01-01, restaurant=Restaurant:100013(Lucky Pizza), dish=Dish{id=100002, price=50, name='Meat Soup}}
2020-05-11 13:25:17,766 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@43120a77 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@5a08d301, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@15aaf7b1 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:25:17,790 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:29:26,258 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:29:26,299 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:29:26,867 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:29:26,876 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:29:26,877 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:29:26,954 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:29:26,956 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:29:26,957 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:29:26,958 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:29:26,960 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:29:26,962 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:29:27,306 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:29:27,313 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:29:27,314 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:29:27,315 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:29:27,322 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:29:27,482 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:29:27,729 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:29:27,933 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 178ms. Found 5 JPA repository interfaces.
2020-05-11 13:29:28,614 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:29:28,726 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:29:28,954 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:29:29,517 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:29:30,101 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:29:30,807 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:29:30,823 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:29:31,171 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:29:31,256 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:29:31,274 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:29:33,061 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:29:33,237 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:29:33,238 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:29:33,266 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 27 ms
2020-05-11 13:29:33,288 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25e24908 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2941631f, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2259d54f]; rollback [true]
2020-05-11 13:29:33,635 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:29:33,933 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25e24908 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2941631f, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6130a6f5 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:29:33,963 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:29:59,222 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:29:59,257 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:29:59,706 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:29:59,713 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:29:59,716 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:29:59,783 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:29:59,785 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:29:59,786 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:29:59,787 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:29:59,789 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:29:59,790 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:30:00,135 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:30:00,144 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:30:00,145 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:30:00,145 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:30:00,154 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:30:00,295 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:30:00,529 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:30:00,678 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 131ms. Found 5 JPA repository interfaces.
2020-05-11 13:30:01,350 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:30:01,449 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:30:01,655 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:30:02,225 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:30:02,687 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:30:03,407 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:30:03,421 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:30:03,879 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a6dbb7c]
2020-05-11 13:30:04,025 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32646ecf, org.springframework.security.web.header.HeaderWriterFilter@35f01759, org.springframework.security.web.authentication.logout.LogoutFilter@76220ef1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@229cb4d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@702cfbde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f3361e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3eb0fd88, org.springframework.security.web.session.SessionManagementFilter@1f4dd016, org.springframework.security.web.access.ExceptionTranslationFilter@24e1e90a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2aafa84f]
2020-05-11 13:30:04,048 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:30:05,901 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:30:06,078 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:30:06,079 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:30:06,116 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 36 ms
2020-05-11 13:30:06,137 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6b170692, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77972964]; rollback [true]
2020-05-11 13:30:06,221 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75a6bd06 testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@6b170692, testMethod = get@MenuRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@4d4bac56 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:30:06,255 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:31:25,295 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:31:25,330 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:31:25,782 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:31:25,794 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:31:25,797 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:31:25,864 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:31:25,865 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:31:25,866 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:31:25,867 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:31:25,868 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:31:25,869 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:31:25,871 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:31:26,168 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:31:26,176 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:31:26,177 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:31:26,178 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:31:26,191 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:31:26,475 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:31:26,724 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:31:26,871 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 128ms. Found 5 JPA repository interfaces.
2020-05-11 13:31:27,602 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:31:27,709 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:31:27,925 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:31:28,498 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:31:28,953 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:31:29,593 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:31:29,607 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:31:29,913 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@36cf16a6]
2020-05-11 13:31:30,007 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2cff5aa3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cce10bc, org.springframework.security.web.header.HeaderWriterFilter@e993715, org.springframework.security.web.authentication.logout.LogoutFilter@78fb72cb, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@702cfbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29bd2796, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@adc3344, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c28f97e, org.springframework.security.web.session.SessionManagementFilter@300aa927, org.springframework.security.web.access.ExceptionTranslationFilter@6774f264, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 13:31:30,025 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:31:31,741 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:31:31,929 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:31:31,930 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:31:31,959 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 28 ms
2020-05-11 13:31:31,985 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@75df4b1d testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@43120a77, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3b29d36c]; rollback [true]
2020-05-11 13:31:32,375 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@75df4b1d testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@43120a77, testMethod = update@DishRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<403>, mergedContextConfiguration = [WebMergedContextConfiguration@430db481 testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:31:32,414 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:31:51,931 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:31:51,965 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@54c62d71, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@65045a87, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f4e407, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2d1dee39, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48d5f34e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@fc258b1, org.springframework.test.context.event.EventPublishingTestExecutionListener@6ff65192, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2dd80673, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@4af0df05]
2020-05-11 13:31:52,452 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:31:52,459 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:31:52,460 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:31:52,534 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:31:52,535 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:31:52,536 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:31:52,536 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:31:52,537 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:31:52,538 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:31:52,540 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:31:52,850 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:31:52,857 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:31:52,858 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:31:52,858 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:31:52,865 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:31:53,022 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:31:53,244 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:31:53,390 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 128ms. Found 5 JPA repository interfaces.
2020-05-11 13:31:54,070 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:31:54,170 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:31:54,384 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:31:54,959 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:31:55,558 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:31:56,210 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:31:56,225 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:31:56,608 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5072e638, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70c31b17, org.springframework.security.web.header.HeaderWriterFilter@6e49b011, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c60c08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4619a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a2035e1, org.springframework.security.web.access.ExceptionTranslationFilter@50f05307, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@36cf16a6]
2020-05-11 13:31:56,701 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@2cff5aa3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cce10bc, org.springframework.security.web.header.HeaderWriterFilter@e993715, org.springframework.security.web.authentication.logout.LogoutFilter@78fb72cb, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@702cfbde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29bd2796, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@adc3344, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c28f97e, org.springframework.security.web.session.SessionManagementFilter@300aa927, org.springframework.security.web.access.ExceptionTranslationFilter@6774f264, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d9d8e46]
2020-05-11 13:31:56,719 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:31:58,507 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:31:58,700 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:31:58,701 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:31:58,730 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 28 ms
2020-05-11 13:31:58,758 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@76980c75 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@3696d12d, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@656672fb testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5e663ab]; rollback [true]
2020-05-11 13:31:59,233 INFO  ru.restaurant.web.controller.DishRestController.update:60 - update Dish{id=100002, price=75, name='Updated}
2020-05-11 13:31:59,372 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@76980c75 testClass = DishRestControllerTest, testInstance = ru.restaurant.web.controller.DishRestControllerTest@3696d12d, testMethod = update@DishRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@656672fb testClass = DishRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:31:59,400 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:32:50,915 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:32:50,951 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:32:51,438 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:32:51,448 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:32:51,449 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:32:51,531 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:32:51,533 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:32:51,535 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:32:51,536 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:32:51,537 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:32:51,538 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:32:51,540 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:32:51,847 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:32:51,854 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:32:51,854 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:32:51,855 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for rest/votes/**
2020-05-11 13:32:51,863 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 800, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 1400, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#1; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#1>, order = 2900]
2020-05-11 13:32:52,144 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:32:52,335 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:32:52,501 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 145ms. Found 5 JPA repository interfaces.
2020-05-11 13:32:53,502 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:32:53,620 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:32:53,825 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:32:54,383 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:32:55,068 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:32:55,684 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:32:55,697 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:32:56,031 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2bea52, org.springframework.security.web.header.HeaderWriterFilter@16fc5622, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79617c3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b56c222, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30bbe83, org.springframework.security.web.access.ExceptionTranslationFilter@45b27ad3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3dec79f8]
2020-05-11 13:32:56,124 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: any request, [org.springframework.security.web.context.SecurityContextPersistenceFilter@12e2f5ab, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35f01759, org.springframework.security.web.header.HeaderWriterFilter@413eaf5d, org.springframework.security.web.authentication.logout.LogoutFilter@25823192, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@174b8d0e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f3361e9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5a1c7619, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f4dd016, org.springframework.security.web.session.SessionManagementFilter@611a2d82, org.springframework.security.web.access.ExceptionTranslationFilter@4331be30, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@13aa54f1]
2020-05-11 13:32:56,141 INFO  o.s.s.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected:154 - Checking whether login URL '/login' is accessible with your configuration
2020-05-11 13:32:57,932 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:32:58,111 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:58,111 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:58,141 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-11 13:32:58,167 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@75df4b1d, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:58,524 INFO  ru.restaurant.web.controller.MenuRestController.delete:93 - delete menu 100016
2020-05-11 13:32:58,600 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@75df4b1d, testMethod = delete@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:58,608 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:58,609 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:58,612 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:32:58,616 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2b18b308, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:58,623 INFO  ru.restaurant.web.controller.MenuRestController.getAll:48 - get all menus
2020-05-11 13:32:58,882 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2b18b308, testMethod = getAll@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:58,885 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:58,886 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:58,888 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:32:58,892 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@504b4a97, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:58,914 INFO  ru.restaurant.web.controller.MenuRestController.getByDate:54 - get menus by date 2020-04-01
2020-05-11 13:32:58,934 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@504b4a97, testMethod = getAllByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:58,936 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:58,937 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:58,939 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 1 ms
2020-05-11 13:32:58,942 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@956cf3d, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:58,977 INFO  ru.restaurant.web.controller.MenuRestController.update:85 - update Menu{date=2020-05-09, restaurant=Restaurant:100015(Green Garden), dish=Dish{id=100008, price=110, name='Fried Chicken}} with id=100016
2020-05-11 13:32:59,053 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@956cf3d, testMethod = update@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:59,055 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:59,056 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:59,059 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:32:59,062 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2389f546, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:59,067 INFO  ru.restaurant.web.controller.MenuRestController.getOfferByDate:61 - get offer by date 2020-04-01
2020-05-11 13:32:59,105 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@2389f546, testMethod = getOfferByDate@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:59,107 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:59,108 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:59,111 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:32:59,115 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@59509393, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:59,123 INFO  ru.restaurant.web.controller.MenuRestController.get:42 - get menu with id=100016
2020-05-11 13:32:59,134 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@59509393, testMethod = get@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:59,136 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:32:59,137 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:32:59,140 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:32:59,143 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@75d9b73c, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1ac2829e]; rollback [true]
2020-05-11 13:32:59,151 INFO  ru.restaurant.web.controller.MenuRestController.createWithLocation:71 - create Menu{date=3000-01-01, restaurant=Restaurant:100013(Lucky Pizza), dish=Dish{id=100002, price=50, name='Meat Soup}}
2020-05-11 13:32:59,187 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@656672fb testClass = MenuRestControllerTest, testInstance = ru.restaurant.web.controller.MenuRestControllerTest@75d9b73c, testMethod = createWithLocation@MenuRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@43120a77 testClass = MenuRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:32:59,213 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:37:27,873 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:37:27,915 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:37:28,519 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:37:28,527 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:37:28,527 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:37:28,613 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:37:28,616 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:37:28,617 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:37:28,618 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:37:28,619 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:37:28,621 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:37:28,622 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:37:28,623 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:37:28,625 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:37:29,018 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:37:29,207 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:37:29,450 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:37:29,651 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 179ms. Found 5 JPA repository interfaces.
2020-05-11 13:37:30,552 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:37:30,711 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:37:31,012 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:37:31,843 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:37:32,443 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:37:33,166 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:37:33,182 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:37:33,603 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@4e5d5ac1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f6f4ac4, org.springframework.security.web.header.HeaderWriterFilter@21ea1d9d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@33e8e146, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c9ea1d0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@13390a96, org.springframework.security.web.access.ExceptionTranslationFilter@2110684a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f655dbd]
2020-05-11 13:37:35,855 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:37:36,093 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:37:36,094 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:37:36,126 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 31 ms
2020-05-11 13:37:36,154 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@74e175c7, testMethod = delete@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54b35809]; rollback [true]
2020-05-11 13:37:36,234 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@74e175c7, testMethod = delete@ProfileRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:37:36,250 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:37:36,251 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:37:36,255 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:37:36,260 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@1afabf06, testMethod = update@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54b35809]; rollback [true]
2020-05-11 13:37:36,372 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@1afabf06, testMethod = update@ProfileRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:37:36,380 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:37:36,381 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:37:36,385 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:37:36,389 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@50dd1e3a, testMethod = get@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@54b35809]; rollback [true]
2020-05-11 13:37:36,392 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@c7443f testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@50dd1e3a, testMethod = get@ProfileRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@1c528f2f testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:37:36,442 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:38:59,474 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:38:59,515 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:39:00,160 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:39:00,171 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:39:00,173 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:39:00,268 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:39:00,269 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:39:00,270 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:39:00,271 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:39:00,273 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:39:00,274 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:39:00,275 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:39:00,277 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:39:00,278 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:39:00,663 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:39:00,866 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:39:01,094 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:39:01,280 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 162ms. Found 5 JPA repository interfaces.
2020-05-11 13:39:02,110 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:39:02,246 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:39:02,525 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:39:03,236 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:39:03,880 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:39:04,672 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:39:04,692 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:39:05,138 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@4e5d5ac1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f6f4ac4, org.springframework.security.web.header.HeaderWriterFilter@21ea1d9d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@33e8e146, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c9ea1d0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@13390a96, org.springframework.security.web.access.ExceptionTranslationFilter@2110684a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f655dbd]
2020-05-11 13:39:07,343 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:39:07,553 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:39:07,554 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:39:07,591 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 36 ms
2020-05-11 13:39:07,616 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@3293030b, testMethod = delete@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@34e53c02]; rollback [true]
2020-05-11 13:39:07,982 INFO  ru.restaurant.web.controller.ProfileRestController.delete:42 - delete 100000
2020-05-11 13:39:08,151 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@3293030b, testMethod = delete@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:39:08,160 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:39:08,162 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:39:08,167 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 5 ms
2020-05-11 13:39:08,172 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@4b518645, testMethod = update@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@34e53c02]; rollback [true]
2020-05-11 13:39:08,361 INFO  ru.restaurant.web.controller.ProfileRestController.update:47 - update User{id=100000, email=user@yandex.ru, name=UpdatedName, enabled=true, roles=[ADMIN], votes=null} with id=100000
2020-05-11 13:39:08,468 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@4b518645, testMethod = update@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:39:08,471 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:39:08,471 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:39:08,474 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:39:08,478 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@9c40f43, testMethod = get@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@34e53c02]; rollback [true]
2020-05-11 13:39:08,486 INFO  ru.restaurant.web.controller.ProfileRestController.get:21 - get 100000
2020-05-11 13:39:08,525 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@2ba9ed19 testClass = ProfileRestControllerTest, testInstance = ru.restaurant.web.controller.ProfileRestControllerTest@9c40f43, testMethod = get@ProfileRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b53e6fc testClass = ProfileRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:39:08,551 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:39:52,634 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:39:52,697 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:39:53,552 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:39:53,568 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:39:53,570 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:39:53,682 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:39:53,687 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:39:53,689 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:39:53,690 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:39:53,692 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:39:53,693 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:39:53,695 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/restaurants/**
2020-05-11 13:39:53,696 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:39:53,698 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:39:54,111 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:39:54,340 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:39:54,673 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:39:54,978 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 281ms. Found 5 JPA repository interfaces.
2020-05-11 13:39:55,941 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:39:56,174 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:39:56,612 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:39:57,340 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:39:58,086 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:39:59,094 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:39:59,112 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:39:59,612 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@236fd411, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49e62b17, org.springframework.security.web.header.HeaderWriterFilter@36a58466, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18463720, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@319b1c77, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7497a554, org.springframework.security.web.access.ExceptionTranslationFilter@61d011e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ac1b6c0]
2020-05-11 13:40:01,998 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:40:02,239 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:02,241 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:02,283 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 41 ms
2020-05-11 13:40:02,314 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5382a35f, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6f651ac]; rollback [true]
2020-05-11 13:40:02,425 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5382a35f, testMethod = delete@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:02,451 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:02,452 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:02,455 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:40:02,462 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@21b2579d, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6f651ac]; rollback [true]
2020-05-11 13:40:02,496 INFO  r.r.web.controller.RestaurantRestController.getAll:39 - getAll
2020-05-11 13:40:02,905 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@21b2579d, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:02,907 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:02,908 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:02,912 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:40:02,916 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5274acd1, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6f651ac]; rollback [true]
2020-05-11 13:40:02,923 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@5274acd1, testMethod = update@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:02,930 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:02,930 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:02,934 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:40:02,939 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@12925d2, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6f651ac]; rollback [true]
2020-05-11 13:40:02,958 INFO  r.r.web.controller.RestaurantRestController.get:33 - get restaurant with id=100013
2020-05-11 13:40:03,033 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@12925d2, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:03,036 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:03,037 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:03,040 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:40:03,046 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3e7ddb7e, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@6f651ac]; rollback [true]
2020-05-11 13:40:03,052 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@65d2d3cc testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3e7ddb7e, testMethod = createWithLocation@RestaurantRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'', mergedContextConfiguration = [WebMergedContextConfiguration@7901a5ab testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:03,081 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:40:44,350 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:40:44,398 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:40:45,069 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:40:45,077 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:40:45,079 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:40:45,159 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:40:45,161 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:40:45,163 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:40:45,164 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:40:45,165 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:40:45,166 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:40:45,168 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/restaurants/**
2020-05-11 13:40:45,169 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:40:45,171 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:40:45,529 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:40:45,837 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:40:46,073 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:40:46,262 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 167ms. Found 5 JPA repository interfaces.
2020-05-11 13:40:47,130 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:40:47,263 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:40:47,523 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:40:48,234 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:40:48,866 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:40:49,627 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:40:49,643 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:40:50,128 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@236fd411, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49e62b17, org.springframework.security.web.header.HeaderWriterFilter@36a58466, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18463720, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@319b1c77, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7497a554, org.springframework.security.web.access.ExceptionTranslationFilter@61d011e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ac1b6c0]
2020-05-11 13:40:52,256 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:40:52,461 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:52,462 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:52,493 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 29 ms
2020-05-11 13:40:52,518 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@65d2d3cc, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5357de0e]; rollback [true]
2020-05-11 13:40:52,594 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@65d2d3cc, testMethod = delete@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:52,611 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:52,613 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:52,615 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:40:52,620 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@539bb233, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5357de0e]; rollback [true]
2020-05-11 13:40:52,624 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@539bb233, testMethod = getAll@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:52,630 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:52,632 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:52,634 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:40:52,637 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@796613b7, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5357de0e]; rollback [true]
2020-05-11 13:40:52,721 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@796613b7, testMethod = update@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:52,727 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:52,728 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:52,732 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-11 13:40:52,736 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@2148b47e, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5357de0e]; rollback [true]
2020-05-11 13:40:52,758 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@2148b47e, testMethod = get@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:52,763 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:40:52,764 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:40:52,767 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:40:52,773 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@50dd1e3a, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@5357de0e]; rollback [true]
2020-05-11 13:40:52,790 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@639cb0c8 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@50dd1e3a, testMethod = createWithLocation@RestaurantRestControllerTest, testException = java.lang.IllegalArgumentException: Invalid read from JSON:
'', mergedContextConfiguration = [WebMergedContextConfiguration@5382a35f testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:40:52,821 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:42:36,321 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:42:36,389 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@35d08e6c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@53d102a2, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6c45ee6e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6b3e12b5, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5aac4250, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1338fb5, org.springframework.test.context.event.EventPublishingTestExecutionListener@42463763, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@59f63e24, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@61f05988]
2020-05-11 13:42:37,053 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:42:37,062 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:42:37,064 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:42:37,145 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:42:37,147 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:42:37,149 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:42:37,150 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:42:37,151 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:42:37,152 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:42:37,159 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/restaurants/**
2020-05-11 13:42:37,160 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:42:37,162 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:42:37,663 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:42:37,901 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:42:38,171 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:42:38,369 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 174ms. Found 5 JPA repository interfaces.
2020-05-11 13:42:39,463 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:42:39,647 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:42:40,014 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:42:40,792 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:42:41,577 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:42:42,531 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:42:42,547 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:42:43,006 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@b808af5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@246df37b, org.springframework.security.web.header.HeaderWriterFilter@236fd411, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6124dda2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5876bed9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45311a99, org.springframework.security.web.access.ExceptionTranslationFilter@57b33c29, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@49fe0bcd]
2020-05-11 13:42:45,126 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:42:45,355 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:42:45,355 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:42:45,390 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 13:42:45,426 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@394b9e22, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4777f71e]; rollback [true]
2020-05-11 13:42:45,910 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@394b9e22, testMethod = delete@RestaurantRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<403>, mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:42:45,929 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:42:45,930 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:42:45,933 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:42:45,937 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@39451d92, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4777f71e]; rollback [true]
2020-05-11 13:42:45,970 INFO  r.r.web.controller.RestaurantRestController.getAll:39 - getAll
2020-05-11 13:42:46,267 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@39451d92, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:42:46,270 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:42:46,271 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:42:46,276 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-11 13:42:46,283 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3ecbfba1, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4777f71e]; rollback [true]
2020-05-11 13:42:46,332 INFO  r.r.web.controller.RestaurantRestController.update:58 - update Restaurant:100013(Updated)
2020-05-11 13:42:46,415 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3ecbfba1, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:42:46,418 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:42:46,418 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:42:46,421 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:42:46,425 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@242c4a94, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4777f71e]; rollback [true]
2020-05-11 13:42:46,434 INFO  r.r.web.controller.RestaurantRestController.get:33 - get restaurant with id=100013
2020-05-11 13:42:46,455 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@242c4a94, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:42:46,457 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:42:46,457 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:42:46,461 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:42:46,464 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3c62c81f, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@4777f71e]; rollback [true]
2020-05-11 13:42:46,474 INFO  r.r.web.controller.RestaurantRestController.createWithLocation:45 - create dish=Restaurant:null(New)
2020-05-11 13:42:46,500 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@6b756a62 testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@3c62c81f, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6e0f259e testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:42:46,524 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:43:20,402 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:43:20,451 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@fc258b1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ff65192, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4af0df05, org.springframework.test.context.transaction.TransactionalTestExecutionListener@57ea113a, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@acdb094, org.springframework.test.context.event.EventPublishingTestExecutionListener@674bd420, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b0f373b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@2ceb80a1]
2020-05-11 13:43:21,123 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:43:21,131 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:43:21,133 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:43:21,217 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:43:21,220 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:43:21,220 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:43:21,223 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:43:21,224 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:43:21,226 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:43:21,227 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/restaurants/**
2020-05-11 13:43:21,228 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:43:21,230 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:43:21,603 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:43:21,942 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:43:22,210 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:43:22,403 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 170ms. Found 5 JPA repository interfaces.
2020-05-11 13:43:23,173 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:43:23,290 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:43:23,546 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:43:24,206 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:43:24,762 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:43:25,544 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:43:25,559 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:43:26,003 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@236fd411, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49e62b17, org.springframework.security.web.header.HeaderWriterFilter@36a58466, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18463720, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@319b1c77, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7497a554, org.springframework.security.web.access.ExceptionTranslationFilter@61d011e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ac1b6c0]
2020-05-11 13:43:28,177 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:43:28,382 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:43:28,383 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:43:28,415 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 30 ms
2020-05-11 13:43:28,443 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@62c42a3, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ee5c08d]; rollback [true]
2020-05-11 13:43:28,903 INFO  r.r.web.controller.RestaurantRestController.delete:66 - delete dish 100013
2020-05-11 13:43:28,984 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@62c42a3, testMethod = delete@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:43:28,994 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:43:28,995 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:43:29,000 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 4 ms
2020-05-11 13:43:29,006 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@167bae0b, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ee5c08d]; rollback [true]
2020-05-11 13:43:29,016 INFO  r.r.web.controller.RestaurantRestController.getAll:39 - getAll
2020-05-11 13:43:29,283 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@167bae0b, testMethod = getAll@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:43:29,285 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:43:29,286 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:43:29,289 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:43:29,294 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@734a2c17, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ee5c08d]; rollback [true]
2020-05-11 13:43:29,330 INFO  r.r.web.controller.RestaurantRestController.update:58 - update Restaurant:100013(Updated)
2020-05-11 13:43:29,407 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@734a2c17, testMethod = update@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:43:29,409 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:43:29,410 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:43:29,414 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:43:29,417 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@52bcfd10, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ee5c08d]; rollback [true]
2020-05-11 13:43:29,425 INFO  r.r.web.controller.RestaurantRestController.get:33 - get restaurant with id=100013
2020-05-11 13:43:29,441 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@52bcfd10, testMethod = get@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:43:29,443 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:43:29,445 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:43:29,449 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:43:29,453 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@1f381eaf, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@2ee5c08d]; rollback [true]
2020-05-11 13:43:29,463 INFO  r.r.web.controller.RestaurantRestController.createWithLocation:45 - create dish=Restaurant:null(New)
2020-05-11 13:43:29,494 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@263e512e testClass = RestaurantRestControllerTest, testInstance = ru.restaurant.web.controller.RestaurantRestControllerTest@1f381eaf, testMethod = createWithLocation@RestaurantRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6a8bcb64 testClass = RestaurantRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:43:29,520 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:46:43,343 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:46:43,397 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:46:43,990 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:46:44,000 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:46:44,001 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:46:44,086 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:46:44,087 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:46:44,089 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:46:44,090 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:46:44,091 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:46:44,092 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:46:44,094 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/restaurants/**
2020-05-11 13:46:44,095 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:46:44,097 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:46:44,509 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:46:44,896 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:46:45,149 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:46:45,332 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 160ms. Found 5 JPA repository interfaces.
2020-05-11 13:46:46,148 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:46:46,267 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:46:46,516 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:46:47,273 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:46:47,858 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:46:48,600 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:46:48,615 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:46:49,031 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@6480a063, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d685f4e, org.springframework.security.web.header.HeaderWriterFilter@9147ba2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@10f8e2d2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51d88c38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@664f49f, org.springframework.security.web.access.ExceptionTranslationFilter@2a661215, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@93f15f6]
2020-05-11 13:46:51,073 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:46:51,303 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,304 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,339 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 35 ms
2020-05-11 13:46:51,369 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@192ecf8, testMethod = delete@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,454 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@192ecf8, testMethod = delete@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,474 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,475 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,479 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:46:51,483 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@27b7e663, testMethod = getAll@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,487 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@27b7e663, testMethod = getAll@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,494 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,496 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,500 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:46:51,505 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@674fd531, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,512 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@674fd531, testMethod = getAllByDate@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,518 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,519 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,522 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:46:51,526 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@ad585fb, testMethod = update@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,641 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@ad585fb, testMethod = update@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<204> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,647 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,648 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,652 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:46:51,658 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@eee26bd, testMethod = get@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,680 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@eee26bd, testMethod = get@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,686 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,687 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,690 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:46:51,695 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@401002ce, testMethod = createWithLocation@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,703 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@401002ce, testMethod = createWithLocation@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<201> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,708 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:46:51,710 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:46:51,714 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:46:51,718 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@5671078e, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:46:51,722 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@25dc2c0 testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@5671078e, testMethod = getResults@VoteRestControllerTest, testException = java.lang.AssertionError: Status expected:<200> but was:<401>, mergedContextConfiguration = [WebMergedContextConfiguration@263e512e testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:46:51,749 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:48:55,536 INFO  o.s.test.context.web.WebTestContextBootstrapper.getDefaultTestExecutionListenerClassNames:248 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2020-05-11 13:48:55,574 INFO  o.s.test.context.web.WebTestContextBootstrapper.getTestExecutionListeners:177 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2dd80673, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4af0df05, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@57ea113a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@acdb094, org.springframework.test.context.transaction.TransactionalTestExecutionListener@674bd420, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2b0f373b, org.springframework.test.context.event.EventPublishingTestExecutionListener@2ceb80a1, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@4b45dcb8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@7216fb24]
2020-05-11 13:48:56,225 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:81 - You are running with Spring Security Core 5.3.2.RELEASE
2020-05-11 13:48:56,231 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:84 - **** You are advised to use Spring 5.2.6.RELEASE or later with this version. You are running: 5.2.5.RELEASE
2020-05-11 13:48:56,233 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:79 - Spring Security 'config' module version is 5.3.2.RELEASE
2020-05-11 13:48:56,328 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
2020-05-11 13:48:56,330 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/dishes/**
2020-05-11 13:48:56,331 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/dishes/**
2020-05-11 13:48:56,333 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'permitAll()' for /rest/menus/offer
2020-05-11 13:48:56,334 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/menus/**
2020-05-11 13:48:56,336 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/menus/**
2020-05-11 13:48:56,337 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /rest/restaurants/**
2020-05-11 13:48:56,339 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/restaurants/**
2020-05-11 13:48:56,341 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
2020-05-11 13:48:56,742 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:314 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2000, Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2200, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2500, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2900]
2020-05-11 13:48:56,972 INFO  o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser.parse:210 - Expressions were enabled for method security but no SecurityExpressionHandler was configured. All hasPermission() expressions will evaluate to false.
2020-05-11 13:48:57,208 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-11 13:48:57,424 INFO  o.s.d.r.config.RepositoryConfigurationDelegate.registerRepositoriesIn:187 - Finished Spring Data repository scanning in 193ms. Found 5 JPA repository interfaces.
2020-05-11 13:48:58,208 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-11 13:48:58,330 INFO  org.hibernate.Version.logVersion:44 - HHH000412: Hibernate ORM core version 5.4.14.Final
2020-05-11 13:48:58,593 INFO  org.hibernate.annotations.common.Version.<clinit>:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-11 13:48:59,326 INFO  org.hibernate.dialect.Dialect.<init>:172 - HHH000400: Using dialect: org.hibernate.dialect.HSQLDialect
2020-05-11 13:49:00,069 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.1.4.Final
2020-05-11 13:49:00,815 INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator.initiateService:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-11 13:49:00,835 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-11 13:49:01,262 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@6480a063, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d685f4e, org.springframework.security.web.header.HeaderWriterFilter@9147ba2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@10f8e2d2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51d88c38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@664f49f, org.springframework.security.web.access.ExceptionTranslationFilter@2a661215, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@93f15f6]
2020-05-11 13:49:03,412 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:297 - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-05-11 13:49:03,624 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:03,625 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:03,660 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 34 ms
2020-05-11 13:49:03,693 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@391e2a, testMethod = delete@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,137 INFO  ru.restaurant.web.controller.VoteRestController.delete:80 - delete menu 100025
2020-05-11 13:49:04,221 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@391e2a, testMethod = delete@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,230 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,231 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,234 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:49:04,240 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@29c76d75, testMethod = getAll@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,249 INFO  ru.restaurant.web.controller.VoteRestController.getAll:46 - get all votes
2020-05-11 13:49:04,537 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@29c76d75, testMethod = getAll@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,540 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,541 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,544 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:49:04,549 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@14d6ede3, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,579 INFO  ru.restaurant.web.controller.VoteRestController.getByDate:52 - get votes by date 2020-04-01
2020-05-11 13:49:04,612 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@14d6ede3, testMethod = getAllByDate@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,614 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,615 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,618 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:49:04,624 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@7d44eab, testMethod = update@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,657 INFO  ru.restaurant.web.controller.VoteRestController.update:72 - update Vote:100025 with id=100025
2020-05-11 13:49:04,717 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@7d44eab, testMethod = update@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,719 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,721 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,724 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:49:04,728 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6dde913e, testMethod = get@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,735 INFO  ru.restaurant.web.controller.VoteRestController.get:40 - get vote with id=100025
2020-05-11 13:49:04,745 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@6dde913e, testMethod = get@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,746 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,747 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,750 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 2 ms
2020-05-11 13:49:04,754 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@643a73fa, testMethod = createWithLocation@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,762 INFO  ru.restaurant.web.controller.VoteRestController.createWithLocation:58 - create Vote:null
2020-05-11 13:49:04,804 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@643a73fa, testMethod = createWithLocation@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,807 INFO  org.springframework.mock.web.MockServletContext.log:455 - Initializing Spring TestDispatcherServlet ''
2020-05-11 13:49:04,809 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:525 - Initializing Servlet ''
2020-05-11 13:49:04,812 INFO  o.s.test.web.servlet.TestDispatcherServlet.initServletBean:547 - Completed initialization in 3 ms
2020-05-11 13:49:04,815 INFO  o.s.test.context.transaction.TransactionContext.startTransaction:107 - Began transaction (1) for test context [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@74267ece, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3efb863c]; rollback [true]
2020-05-11 13:49:04,826 INFO  ru.restaurant.web.controller.VoteRestController.getVoteResults:86 - Get result of voting
2020-05-11 13:49:04,858 INFO  o.s.test.context.transaction.TransactionContext.endTransaction:139 - Rolled back transaction for test: [DefaultTestContext@1b53e6fc testClass = VoteRestControllerTest, testInstance = ru.restaurant.web.controller.VoteRestControllerTest@74267ece, testMethod = getResults@VoteRestControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@641cea11 testClass = VoteRestControllerTest, locations = '{classpath:spring/spring-app.xml, classpath:spring/spring-mvc.xml, classpath:spring/spring-db.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.test.context.web.WebDelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]
2020-05-11 13:49:04,884 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.destroy:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
